(this["webpackJsonpflat-maintenance"]=this["webpackJsonpflat-maintenance"]||[]).push([[0],{216:function(e,t){},379:function(e,t){},480:function(e,t){},482:function(e,t){},506:function(e,t){},534:function(e,t){},536:function(e,t){},565:function(e,t){},567:function(e,t){},568:function(e,t){},574:function(e,t){},576:function(e,t){},579:function(e,t){},581:function(e,t){},601:function(e,t){},617:function(e,t){},620:function(e,t){},667:function(e,t){},694:function(e,t,a){},747:function(e,t,a){},756:function(e,t,a){},760:function(e,t,a){},761:function(e,t,a){},762:function(e,t,a){},763:function(e,t,a){},765:function(e,t){},766:function(e,t){},767:function(e,t,a){},768:function(e,t,a){},769:function(e,t,a){},770:function(e,t,a){},771:function(e,t,a){},772:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(382),s=a(94),o=a(865),c=a(54),l=a(431),d=a.n(l),u=a(432),h=a.n(u),p=a(427),g=a.n(p),b=a(426),j=a.n(b),m=a(429),O=a.n(m),v=a(430),y=a.n(v),A=a(428),S=a.n(A),f=a(95),C=a(126),x=a(386);let D=function(e){return e.LOAD_TRANS="LOAD_TRANS",e.LOAD_CASH_TRANS_SUCCESS="LOAD_CASH_TRANS_SUCCESS",e.LOAD_ONLINE_TRANS_SUCCESS="LOAD_ONLINE_TRANS_SUCCESS",e.LOAD_CASH_TRANS_FAILURE="LOAD_CASH_TRANS_FAILURE",e.LOAD_ONLINE_TRANS_FAILURE="LOAD_ONLINE_TRANS_FAILURE",e.UPDATE_MONTHLY_SPLIT="UPDATE_MONTHLY_SPLIT",e.RESET_MONTHLY_SPLIT="RESET_MONTHLY_SPLIT",e.UPDATE_MONTHLY_MAINT_SPLIT="UPDATE_MONTHLY_MAINT_SPLIT",e.RESET_MONTHLY_MAINT_SPLIT="RESET_MONTHLY_MAINT_SPLIT",e.RESET_TRANS="RESET_TRANS",e}({});const T={loading:!1,cashTransData:void 0,onlineTransData:void 0,monthlyCatSplit:void 0,error:""};var E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.LOAD_TRANS:return{...e,loading:!0};case D.LOAD_CASH_TRANS_SUCCESS:return{...e,loading:!1,cashTransData:t.payload,error:""};case D.LOAD_ONLINE_TRANS_SUCCESS:return{...e,loading:!1,onlineTransData:t.payload,error:""};case D.LOAD_CASH_TRANS_FAILURE:return{...e,loading:!1,cashTransData:void 0,error:t.payload};case D.LOAD_ONLINE_TRANS_FAILURE:return{...e,loading:!1,onlineTransData:void 0,error:t.payload};case D.UPDATE_MONTHLY_SPLIT:return{...e,monthlyCatSplit:t.payload,loading:!1};case D.RESET_MONTHLY_SPLIT:return{...e,monthlyCatSplit:void 0};case D.UPDATE_MONTHLY_MAINT_SPLIT:return{...e,monthlyMaintSplit:t.payload,loading:!1};case D.RESET_MONTHLY_MAINT_SPLIT:return{...e,monthlyMaintSplit:void 0};case D.RESET_TRANS:return T;default:return e}},I=a(385),N=a(48),w=a.n(N),R=a(30),M=a.n(R);const k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={res:!1,error:""};if(e){const n=w.a.AES.decrypt(P.ENC_CLIENT_EMAIL,e),i=w.a.AES.decrypt(P.ENC_PRIVATE_KEY,e),r=w.a.AES.decrypt(P.ENC_CHAT_GPT_KEY,e),s=w.a.AES.decrypt(P.ENC_GOOGLE_API_KEY,e),o=w.a.AES.decrypt(P.ENC_GEMINI_KEY,e),c=w.a.AES.decrypt(P.OCR_SPACE_KEY,e);try{P.clientEmail=n.toString(w.a.enc.Utf8),P.privateKey=i.toString(w.a.enc.Utf8),P.googleAPIKey=s.toString(w.a.enc.Utf8),P.secret=e,P.chatGPTPrivateKey=r.toString(w.a.enc.Utf8),P.geminiKey=o.toString(w.a.enc.Utf8),P.ocrSpaceKey=c.toString(w.a.enc.Utf8),sessionStorage.setItem("session-id",e),t.res=!0}catch(a){P.secret="",t.res=!1,t.error="Invalid Secret Provided"}}else P.secret="",t.res=!1,t.error="Empty Secret Set";return t},Y=["001","002","003","004","005","007","008","009","010","011","012","101","102","103","104","105","106","107","108","109","110","111","112","201","202","203","204","205","206","207","208","209","210","211","212","301","302","303","304","305","306","307","308","309","310","311","312","401","402","403","404","405","406","407","408","409","410","411","412"],L={transCategories:[{key:"maintenance",label:"Maintenance",children:Y.map((e=>({key:`maintenance-${e}`,label:e})))},{key:"corpus",label:"Corpus Fund",children:Y.map((e=>({key:`corpus-${e}`,label:e})))},{key:"monthly",label:"Monthly Expenses",children:[]},{key:"others",label:"Others",children:[{key:"fine",label:"Fine"},{key:"extra",label:"Other Income"},{key:"account-transfer",label:"FD Deposit"},{key:"tenant-deposit",label:"Tenant Deposit"},{key:"rd-deposit",label:"Deposit to RD account"}]}],transactionFinYear:M()().format("YY"),transSheetMonth:"",transactions:[]},B="10nggWYtniiCR4rd0sG6CVtNFTK3p8QjJyg0XhhLti28",P={secret:sessionStorage.getItem("session-id")||"",SPREADSHEET_ID:B,ENC_CLIENT_EMAIL:"U2FsdGVkX19lrOkAqkI1YRZkdHSjXZc+dtJNUzOhSlqaydB6Gxi4lm9MpS7+2/W7OtInfOCmh739buu1z1jzT/jJrAeRX2+hKkxc+3qsduw=",ENC_PRIVATE_KEY:"U2FsdGVkX1/i7T93uNMkvtV/hIYkButYpbgdWdXVf4ftrMUIjGc7OmaZRamJzAZNh3HKcvAW92t+mtWkIpJ2sLzLlB0BWWbBTZDPl+C/oD1YCcDZYCCPaHOcSvedvzBXLP3lGDi61mXPqPPGMDquh90g7oKvO8w+Oe6JIV8HQ9EYYB/rd/IRj34CP9K96NQDxcy06xsL2SfMMQuqSyBwRYYebogb4NZgpjfSKx6AJCvRnHkZMGBt2E0xtGm1UmS+XLq1Dlay8s2fJAYuF4yxSMjJpCzhOdTY0rhbTIQ8D3kZvJJU9+MCS4yqsVBCdqkWRqoQBBhHk8vSwb8ZTcomRUg4w6JDOu+HCT4vA6x5Jz8aSYu0CxZKndd4gHXy55YklnC728IKDavaEC13bNG/OrsBQL8P0IjzuomEAiQdFpdoQg81JmANZx1MbGD8NvdmuNEGzkTLPEssID5pO1AzGCepSeikWB8XXkJu+kHLGQe6SyBE7oxv5SDfeexWfkGOObo2Af9VbtZwg+jlVgKzf0lBj9NW0soC15VrpzV4t7oUpMT3Fe6d3oijHQ2hPxTYZMfuA8UsyO3WSTUbaxNWOpUbijJsDSUpENGQyr1XFSV4+3aN78prPt443BiaHAm8i50y9z2P7TJJteRrRE900MBm/9sMRK3fZb91VUJ9wsvmzRsJK7cxxBStx7T1k3wxQZCJisWXej+vqRlP0le95yB/2BikMV+nYyom4gQrySk8eW2rzvx26LS3LHf867SdpXSWzT7RBdIhxd6IXsK8B/fIjmR6zpeqMb/LUjRm4LcTn3UZgKEYDEFmgRGR07lsTP1czidqjCuOn+o9mZblzbsMFFAFzPhaj0ZKcO82vs3bHkDGIfoaN+EimD1ThwxlEehX08EOOKNLp19sxpUcwaxjbRgwunMh0o7J/H92TpsppRJJRfUEsI/ReI021yqkpiqRZcI/cEn3NykY1MualaqkuddoKqeD2LKjOmxaT26niNSsd/ffhjBD5f1DCWq84iXQaje6SIV1ZwesIUbUUG7MSTHI6Mf3LZuWIK/HQU/MhSYYtIHv7rvcJUyw0e/ZnUfKBRgyMYSLeTZI55MYPJ0HUGPJWIWnYMk8ESLBLnPnDknXo2m1i87Y37ui3Snqy7s6WW6nYlz1/HPexx/HQaQl5UsRGNre6+RREonqmL+B+AITWlN+bA4iLOnYfCg8OdyACDWBge3fwxduWWB4vtzlDNMx/Xqcb52BZAAh6d6Z7AE3t66ZfHv16VZnEEm14uV+zBgt41Mkfv0LNFZ6cqOjafwioFnMO9e3j738n2xwKMzcMzsdnhmHkyF7i7PLZqbTBp8P167/psPnfUV8vfcsmTombUUzOzViqJABfG6EczwhN19dd4lusGVDNrz43ywTA5zfU/jMcy1wk7i90rXo0HZSNNOuLGog2+qlx2xuyHORqdEVshb0BeJYckX95zjXLu6BuTO66vp4oIzecv9vprH3Jfx67mRvKKa+8xExXlY0BDM7vND5+EAZ0wz71MJonVjx/cXHqrSDxcnU1x5BJLAgZliQDZk/lAxBbUSuqvF21NBvZWGk2rDRKr5rTibBRDeOGoTQW1kRus87/YPBvThJ2OlFHkEAYskLyk8xPFTeC2XUJCEF7K6U3UpjL7LLWoCP+KcwazlItikvTzR44AAf2iFRf0+6wVQLZjpHZed0Z7KchTDyCm0ydVHuMAJjpogPjUbj26tbiICQ9SRtO+keG+JUHElkQzOe0bfsTuw8CqwPm6C1hNL9ReYYxrbwAwrZU8si4RWE1qSJ3cQXrxIOP275Uvsr5eUlgWYdJBrrYGUOjvQupB5CX9JL9SuH8Rfml2NzrMLWMM5mT9R1amUKLcl2ZyLkC4NDEmeqxPMtRtPLlQA/1aH939OdMbR5OZ9ozlSZFGiSS1eucvK44xvI4KCbFARx+urxXQgTSmZd/GwcFc5ZZXlojU8DTgQc5HTijP2x8iMptYYK/iPz2brWPs7LZsOiBaKCsbzWGdu/Lo3xJRqZoS5x7jGNl2q0JCj9/a0m7v+ODEZ6LaAQwsKX6M5iqNQ0YQWzlMClB6i1shbbrLsqtACXovqx9ACssZMVt7U9/WlDnmpjV+QT5Duhx8WBKehO2CeL2W9ZO8TtW+YDsV0mytvkXPwMl2RwMSAoNVau7b4CrU67z8BEVFcRKGHIURXxN/vithCvLR7Kk8+37cF16NOLBu1t6uixXH+0371xj74wJf7RFeeceyeZvGDrAsJ5qRvqD+vsAjl3EGUJySw1BJryedcR",ENC_GOOGLE_API_KEY:"U2FsdGVkX1+z10t9/VGkdh+xgB9JO7TwDIGpiW5ivAoQrmKV9c77947cJH49fTgzZcc5DSaLNH1jlCpIiLbSuw==",ENC_CHAT_GPT_KEY:"U2FsdGVkX19CE/c8Tng+qxPTykma92uBwnVA8hVNUPhl5desREv8awMfLxjN2ZnKC23rEB6XcYTSzVfgEwgEqQPZuhXq3Ef0cng56m8DqyI=",ENC_GEMINI_KEY:"U2FsdGVkX1+ja6BvyIZ4xRS/wHKtCFsD22qQ0wfw/U30gL6c2FfqhrQyqt25ch1C77vdq1A7rlLZ0RKBXXjmaQ==",OCR_SPACE_KEY:"U2FsdGVkX1/Je2pGMUWIY8Mnid+Xulw55FuCkiYcNvU=",doc:new I.GoogleSpreadsheet(B),appData:L},U=()=>P;P.secret&&k(P.secret);const _=i.a.createContext(P);var H=_,F=function(e){return e.INIT="INIT",e.INIT_SUCCESS="GET_SHEET_INFO",e.INIT_FAILURE="GET_SHEET_INFO_FAILURE",e.SET_SHEET_INFO="SET_SHEET_INFO",e}(F||{}),K=F;const J={initError:"",sheetConfig:U(),sheetInfo:new Map};var W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.INIT:return{...e,initializing:!0};case K.INIT_SUCCESS:return{...e,initializing:!1,appConfig:t.payload};case K.INIT_FAILURE:return{...e,initializing:!1,initError:t.payload};case K.SET_SHEET_INFO:return{...e,sheetInfo:t.payload};default:return e}};let q=function(e){return e.INIT="INIT",e.SUCCESS="SUCCESS",e.FAILURE="FAILURE",e.SET_CONFIG="SET_CONFIG",e.ADD_EVENTS="ADD_EVENTS",e}({});const V={isLoading:!1,data:{},config:{encBotId:"U2FsdGVkX1/0gDV/ibea6VfAgozs8tNyWPB0zt3iRLDsNORNjxOhmloQXZl7ywLjxeQl4Bmxe3iZ7RLdUxi+BA==",listURL:"https://state-tourniquet.000webhostapp.com/suraksha/telegram/get.php",fetchURL:"https://api.telegram.org/bot{{botId}}/getFile?file_id={{fileId}}",downloadURL:"https://api.telegram.org/file/bot{{botId}}/photos/{{filePath}}",updateURL:"https://state-tourniquet.000webhostapp.com/suraksha/telegram/processed.php?id={{recordId}}"},layoutData:void 0,events:[]};var G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.INIT:return{...e,isLoading:!0,layoutData:t.payload};case q.SUCCESS:return{...e,isLoading:!1,data:t.payload,error:void 0};case q.FAILURE:return{...e,isLoading:!1,data:void 0,error:t.payload};case q.SET_CONFIG:return{...e,config:t.payload};case q.ADD_EVENTS:return{...e,events:[...e.events,t.payload]};default:return e}};var z=Object(C.b)({sheet:W,trans:E,bills:G});const Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.c;var X=Object(C.d)(z,Z(Object(C.a)(x.a))),$=a(852),Q=a(857),ee=a(879),te=a(880),ae=a(881),ne=a(882),ie=a(871),re=a(1);function se(e){const[t,a]=i.a.useState(!0),[r,s]=i.a.useState(""),o=Object(n.useCallback)((()=>{e.handleSecret(r)}),[e,r]),c=Object(n.useCallback)((e=>{s(e.target.value)}),[]),l=Object(n.useCallback)((t=>{13===(t.keyCode?t.keyCode:t.which)&&e.handleSecret(r)}),[e,r]);return Object(re.jsxs)($.a,{open:t,keepMounted:!0,"aria-labelledby":"Secret Key","aria-describedby":"Enter your secret key",children:[Object(re.jsx)(Q.a,{id:"alert-dialog-slide-title",children:"Enter the secret key!!!"}),Object(re.jsxs)(ee.a,{children:[Object(re.jsx)(te.a,{id:"alert-dialog-slide-description",children:"Check with other committee members, if secret key is not known."}),Object(re.jsx)(ae.a,{type:"password",value:r,onChange:c,onKeyPress:l}),Object(re.jsx)("div",{className:"error",children:e.errorMsg})]}),Object(re.jsx)(ne.a,{children:Object(re.jsx)(ie.a,{onClick:o,disabled:!r,color:"primary",children:"OK"})})]})}var oe=a(16),ce=a(883),le=a(398),de=a.n(le),ue=a(397),he=a.n(ue),pe=(a(694),a(64)),ge=a.n(pe),be=a(393),je=a(395),me=a.n(je),Oe=a(396);const ve=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(Date.now()/1e3+3600);const{clientEmail:t,privateKey:a}=U(),n={iss:t,sub:"",aud:"https://www.googleapis.com/oauth2/v4/token",scope:"https://www.googleapis.com/auth/drive",exp:e,iat:Math.floor(Date.now()/1e3),jti:Object(Oe.uuid)()};return me.a.sign(n,a||"",{algorithm:"RS256"})},ye=async()=>{const{clientEmail:e}=U(),t={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",client_id:e,assertion:await ve()},a=await ge.a.post("https://www.googleapis.com/oauth2/v4/token",t);if(200===a.status)return a.data.access_token;throw new Error(a.data)};const Ae="VERIFIED_",Se="1eTWYl3QDrOsHK6scX6bBjqEhU501JmNR";async function fe(e){const{googleAPIKey:t}=U(),a=encodeURI(`'${e||Se}' in parents and (mimeType = 'image/jpeg' or mimeType = 'image/png' or mimeType = 'application/pdf' or mimeType = 'application/vnd.google-apps.folder')`);try{const e=await ge.a.get(`https://www.googleapis.com/drive/v3/files?q=${a}&key=${t}`),{files:n}=e.data;return console.log("Fetched files:",n),n}catch(n){console.error("Error fetching files:",(null===n||void 0===n?void 0:n.message)||n)}return[]}const Ce=async(e,t)=>{try{const a=await ye(),n=await ge.a.patch(`https://www.googleapis.com/drive/v3/files/${e}`,{name:`${Ae}${t}`},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(console.log("File moved successfully:",n.data),200===n.status)return n.data}catch(a){console.error("Error occurred while moving the file:",a)}return null};const xe=()=>U().ocrSpaceKey||"",De="https://api.ocr.space/parse/image",Te=e=>{const t=new FormData;return t.append("url",e),t.append("language","eng"),t.append("isTable","true"),t.append("OCREngine","5"),t.append("filetype",".Auto"),Object(be.a)(ge.a,{retries:3}),ge.a.post(De,t,{headers:{"Content-Type":"multipart/form-data",apikey:xe()}}).catch((e=>{console.error(e)}))};const Ee=async e=>{const t=function(e){let t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);const a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length);for(let i=0;i<t.length;i+=1)n[i]=t.charCodeAt(i);return new Blob([n],{type:a})}(e),a=new File([t],"canvasImage.jpg",{type:"image/jpeg"}),n=new FormData;n.append("base64Image",a);return await ge.a.post(De,n,{headers:{"Content-Type":"multipart/form-data",apikey:xe()}})};var Ie=a(231);class Ne{constructor(){if(this.chatGPTPrivateKey="",this.openAI=void 0,this.appConfig=void 0,this.appConfig=U(),this.appConfig.chatGPTPrivateKey){this.chatGPTPrivateKey=this.appConfig.chatGPTPrivateKey;const e=new Ie.Configuration({organization:"org-wfOq673LgvxydlfXwY3Fmcvm",apiKey:this.chatGPTPrivateKey});this.openAI=new Ie.OpenAIApi(e)}}async getCompleted(e){return this.openAI?this.openAI.createCompletion({model:"text-davinci-003",prompt:"Say this is a test",max_tokens:7,temperature:0,top_p:1,n:1,stream:!1,logprobs:null,stop:"\n"}):Promise.resolve("")}static getInstance(){return Ne.instance||(Ne.instance=new Ne),Ne.instance}}Ne.instance=void 0;var we=Ne;var Re=function(){const e=Object(n.useRef)(),[t,a]=Object(n.useState)(),[i,r]=Object(n.useState)(!0),s=Object(n.useCallback)((()=>{const n=e.current||{};!t&&n&&n.takePhoto?(a(n.takePhoto()),r(!1)):a(void 0)}),[e,t]),o=Object(n.useCallback)((()=>{r((e=>!e))}),[]),c=i?"cash-trans block-page":"cash-trans",[l,d]=Object(n.useState)();return Object(n.useEffect)((()=>{t&&Ee(t).then((async e=>{const{ParsedText:t}=e.data.ParsedResults[0]||{};if(t){const e=await we.getInstance().getCompleted(t);d(e)}}))}),[t]),Object(re.jsxs)("div",{className:c,children:[Object(re.jsx)("div",{children:"Handle Cash Transactions"}),Object(re.jsx)("pre",{children:JSON.stringify(l,void 0,4)}),!t&&Object(re.jsx)(ce.a,{className:"close-camera","aria-label":"Take Photo",onClick:o,children:i?Object(re.jsx)(he.a,{}):Object(re.jsx)(de.a,{})}),Object(re.jsx)(ce.a,{className:"camera-click","aria-label":"Take Photo",onClick:s,children:Object(re.jsx)("img",{src:"/images/circular-camera.png",alt:"Take Pic"})})]})};var Me=()=>Object(re.jsx)(Re,{}),ke=a(144),Ye=a(872),Le=a(786),Be=a(890),Pe=a(866);var Ue={"Audit Fees":1,BWSSB:2,Diesel:3,Bescom:4,"House Keeping Salary":5,Security:6,"Garden Maintenance":7,"Garbage Collection Vendor / BBMP":8,"Borewell And Motor Maintenance":9,"Annual Bonus":10,"Lift Maintenance":11,"HK Items Purchased":12,"Health Club Maintenance":13,"Electrical / Plumbing Repairs":14,"Apartment repairs related":15,"Apartment Safety":16,"CCTV / Intercomm":17,"Misc expenses":18,"Apartment developments":19,"Apartment Work By Security and Others":20,"Septic Tank Repairs / Cleaning":21,"Water Tanks Cleaning":22,"Generator Maintenance and Repair":23,"Savings Bank SMS Charges/Cheque book":24,"Festival/Holiday Celebration":25,"Drinking Water for Employees":26,"BAF Subscription Charges":27,"Maintenance Collection":30,"Income Tax Refund":31,"Other Income":32,"Interest on account":33,"Fine / Extra Payment Received":34,"Corpus Fund":35,"Tenant Deposit from the Owners":36,"FD Deposit":37,"Deposit to RD account":38};var _e={Apr:2,May:3,Jun:4,Jul:5,Aug:6,Sep:7,Oct:8,Nov:9,Dec:10,Jan:11,Feb:12,Mar:13},He={"001":1,"002":2,"003":3,"004":4,"005":5,"007":6,"008":7,"009":8,"010":9,"011":10,"012":11,101:12,102:13,103:14,104:15,105:16,106:17,107:18,108:19,109:20,110:21,111:22,112:23,201:24,202:25,203:26,204:27,205:28,206:29,207:30,208:31,209:32,210:33,211:34,212:35,301:36,302:37,303:38,304:39,305:40,306:41,307:42,308:43,309:44,310:45,311:46,312:47,401:48,402:49,403:50,404:51,405:52,406:53,407:54,408:55,409:56,410:57,411:58,412:59};var Fe={Apr:2,May:3,Jun:4,Jul:5,Aug:6,Sep:7,Oct:8,Nov:9,Dec:10,Jan:11,Feb:12,Mar:13};let Ke;class Je{constructor(){this.currentSheet="",this.initialized=!1,this.appConfig=void 0,this.appConfig=U()}init(){return this.initialized?Promise.resolve(this.appConfig.doc):new Promise(((e,t)=>{const{doc:a}=this.appConfig;a.useServiceAccountAuth({client_email:this.appConfig.clientEmail||"",private_key:this.appConfig.privateKey||""}).then((()=>{a.loadInfo().then((()=>{this.initialized=!0,e(a)})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e),t(e)}))}))}getSpreadSheet(){return this.appConfig.doc}async getSheetByTitleAsJson(e){const t=[],a=await this.getSheetByTitle(e);let n=a.headerValues,i=a.columnCount;if(!n||0===n.length){n=[];for(let e=0;e<i;e+=1){const{value:t}=a.getCell(0,e);t&&n.push(a.getCell(0,e).value.toString())}}i=n.length;const{rowCount:r}=a;for(let s=1;s<r;s+=1){const e={},r=[];for(let t=0;t<i;t+=1){const i=n[t],o=a.getCell(s,t).formattedValue;e[i]=o,r.push(o)}if(!r.some((e=>null!==e)))break;t.push(e)}return t}async getSheetByTitle(e){var t;const a=null===(t=this.appConfig.doc)||void 0===t?void 0:t.sheetsByTitle[e];return a&&(this.currentSheet=a.sheetId,await a.loadCells()),a}async getSheet(e){this.currentSheet=e;const t=this.appConfig.doc.sheetsById[e];return await t.loadCells(),t}appendSheet(e,t){return this.appConfig.doc.sheetsById[e].addRow(t)}append(e){return this.appConfig.doc.sheetsById[this.currentSheet||""].addRow(e)}async appendRows(e){const t=this.appConfig.doc.sheetsById[this.currentSheet||""];await t.addRows(e)}getSheetRow(e,t){return this.appConfig.doc.sheetsById[e].getRows({limit:1,offset:t})}getRow(e){return this.appConfig.doc.sheetsById[this.currentSheet||""].getRows({limit:1,offset:e})}getColumn(e){const t=this.appConfig.doc.sheetsById[this.currentSheet||""],a=[],n=t.rowCount<100?t.rowCount:100;for(let i=0;i<n-1;i+=1)a.push(t.getCell(i,e));return a}getColumnWithSheet(e,t){const a=[],n=e.rowCount<100?e.rowCount:100;for(let i=0;i<n-1;i+=1)a.push(e.getCell(i,t));return a}getSheetColumn(e,t){const a=this.appConfig.doc.sheetsById[e],n=[],i=a.rowCount<100?a.rowCount:100;for(let r=0;r<i-1;r+=1)n.push(a.getCell(r,t));return n}getSheetCell(e,t,a){return this.appConfig.doc.sheetsById[e].getCell(t,a)}getCell(e,t){return this.appConfig.doc.sheetsById[this.currentSheet||""].getCell(e,t)}saveSheetCells(e,t){return this.appConfig.doc.sheetsById[e].saveCells(t)}saveCells(e){return this.appConfig.doc.sheetsById[this.currentSheet||""].saveCells(e)}addSheet(e){return this.appConfig.doc.addSheet(e)}async saveSheetWithJSON(e){const t=this.appConfig.doc.sheetsById[this.currentSheet||""];await this.updateSheet(t,e)}async updateCategorySheet(e){const t=await this.getSheetByTitle("Summary");await t.loadCells();return Object.keys(e).forEach((a=>{const n=e[a],i=Object.keys(n),r=a.replace(/-\d+$/,""),s=_e[r];i.forEach((e=>{const a=Ue[e];if("undefined"!==typeof a&&"undefined"!==typeof s){t.getCell(a,s).value=n[e]}}))})),t.saveUpdatedCells()}async udpateMaintenanceSheet(e){const t=await this.getSheetByTitle("Maintanence");await t.loadCells();return Object.keys(e).forEach((a=>{const n=e[a],i=Object.keys(He),r=a.replace(/-\d+$/,""),s=Fe[r];i.forEach((e=>{const a=He[e];if("undefined"!==typeof a&&"undefined"!==typeof s){t.getCell(a,s).value=n[e]}}))})),t.saveUpdatedCells()}async searchUpdateRecord(e,t,a,n){const i=await this.getSheetByTitle(e),r=await i.getRows(),s=r.findIndex((e=>Object.entries(t).every((t=>{let[a,n]=t;return e[a]===n}))));if(-1===s)throw console.log("Record not found."),new Error("RECORD_NOT_FOUND");{const e=r[s];e[a]?console.log("Record found but input column is not empty."):(e[a]=n,await e.save(),console.log("Record updated successfully."))}}isEmptySheet(e){return!e||0===e.rowCount}async updateSheet(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t&&t.length){const n=Object.keys(t[0]),i=n.length,r=a+t.length;for(let s=a;s<r;s+=1){const a=t[s];for(let t=0;t<i;t+=1){const i=e.getCell(s+1,t),r=a[n[t]];i.formattedValue!==r&&(i.value=r)}}}await e.saveUpdatedCells()}async updateSheetWithJSON(e,t){t&&await this.getSheetByTitle(t),await this.appendRows(e)}static getInstance(){return Ke||(Ke=new Je,Ke.init()),Ke}}var We=Je.getInstance();const qe=()=>({type:K.INIT}),Ve=e=>({type:K.INIT_SUCCESS,payload:e}),Ge=e=>({type:K.INIT_FAILURE,payload:e});let ze=function(e){return e.and="and",e.or="or",e.xor="xor",e.not="not",e.nand="nand",e.nor="nor",e}({});var Ze=class{constructor(e){this.query=void 0,this.query=e}run(e){return Object.keys(this.query).every((t=>{const a=this.query[t];switch(t){case ze.or:return a.some((t=>e(t)));case ze.nor:return!a.some((t=>e(t)));case ze.xor:{const t=a.map((t=>e(t)));return t.some((e=>!0===e))&&t.some((e=>!1===e))}case ze.nand:case ze.not:return!a.every((t=>e(t)));case ze.and:default:return a.every((t=>e(t)))}}))}};const Xe=4,$e={};function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const a=String(e).toLowerCase(),n=[];let i,r=-1;for(;++r<a.length;){const e=a.charAt(r);let t=$e[e];0===r?n.push(e.toUpperCase()):t&&t!==i?n.push(t):t=0===t?void 0:i,i=t}return function(e){const t=Xe-e.length;let a=-1;for(;++a<t;)e+="0";return e}(n.join("")).slice(0,t||Xe)}$e.a=$e.e=$e.i=$e.o=$e.u=$e.y=0,$e.b=$e.f=$e.p=$e.v=1,$e.c=$e.g=$e.j=$e.k=$e.q=$e.s=$e.x=$e.z=2,$e.d=$e.t=3,$e.l=4,$e.m=$e.n=5,$e.r=6;const et=(e,t)=>t.split(/\s+/).some((t=>Qe(t.toString())===Qe(e))),tt=(e,t)=>t.some((t=>Qe(t.toString())===Qe(e)));var at=class{constructor(e){this.query=void 0,this.query=e}run(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!1;const{opr:n,value:i}=this.query;if(e&&i)switch(n){case"==":a=e.toString()===i.toString()||et(i.toString(),e.toString());break;case"!=":a=e.toString()!==i.toString();break;case">":a=e>i;break;case">=":a=e>=i;break;case"<":a=e<i;break;case"<=":a=e<=i;break;case"having":if("string"===typeof e)if(Array.isArray(i))a=i.some((a=>{const n=a.toString(),i=e.toLowerCase(),r=n.toLowerCase();return i.indexOf(r)>-1||!t&&et(r,i)}));else{const n=i.toString(),r=e.toLowerCase(),s=n.toLowerCase();a=r.indexOf(s)>-1||!t&&et(s,r)}break;case"regex":if(Array.isArray(i))a=i.some((t=>{var a;const n=t.toString(),i=new RegExp(n,"i");return(null===(a=e.match(i))||void 0===a?void 0:a.length)>0}));else{var r;const t=i.toString(),n=new RegExp(t,"i");a=(null===(r=e.match(n))||void 0===r?void 0:r.length)>0}break;case"in":Array.isArray(i)&&(a="string"===typeof i[0]?i.indexOf(e.toString())>-1||tt(e.toString(),i):i.indexOf(e)>-1);break;case"range":Array.isArray(i)&&(a="undefined"===typeof i[0]||e>=i[0],a=a&&("undefined"===typeof i[1]||e<=i[1]))}return a}};class nt{constructor(e){this.query=void 0,this.query=e}run(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object.keys(this.query).every((a=>{const n=this.query[a];let i=!1;if(Array.isArray(n))i=n.every((n=>{const i=new at(n),r=e[a];return i.run(r,t)}));else{i=new Ze(n).run((n=>{const i=new at(n),r=e[a];return i.run(r,t)}))}return i}))}}class it{constructor(e){this.catFieldMap=void 0,this.catFieldMap=e}run(e){const t=Object.keys(this.catFieldMap);e.forEach((e=>{if(!e.Category){const a=t.find((t=>{const a=this.catFieldMap[t];let n;if(Array.isArray(a))n=a.every((t=>new nt(t).run(e)));else{n=new Ze(a).run((t=>new nt(t).run(e)))}return n}));e.Category=a}}))}}var rt={"Maintenance Collection":[{Credit:[{opr:"in",value:["3,200.00","3200","2,700.00","2700","2,800.00","2800","500.00","500","6,400.00","6400","9,600.00","9600","12,800.00","12800","19,000.00","19000"]}],Description:[{opr:"having",value:["maintenance","neft","upi","imps"]}]}],"Audit Fees":[{Description:[{opr:"having",value:["N YASWANTH","YASWANTH","audit","audit fees"]}]}],"Corpus Fund":[{Credit:[{opr:"in",value:["7500","7,500.00","15,000.00","15000","22,500.00","22500","30,000.00","30000","37,500.00","37500","45,000.00","45000"]}],Description:[{opr:"having",value:["corpus","neft","upi","imps"]}]}],"Income Tax Refund":[{Credit:[{opr:"in",value:["ACH","AY20","ACH Credit","AAKAS1985M"]}]}],Bescom:[{Description:[{opr:"having",value:["BESCOM","Electricity","EBANK:BBPS"]}]}],BWSSB:[{Debit:[{opr:"range",value:[14e3,16500]}],Description:[{opr:"having",value:["BANGALORE WATER SUPPLY","BWSSB","BANGALORE ONE","EBANK:BBPS"]}]}],"CCTV / Intercomm":[{Description:[{opr:"having",value:["SHANKAR TELECOM LINKS","Intercom"]}]}],Security:[{Debit:[{opr:"in",value:[35e3,35e3,41e3,41e3]}]}],"House Keeping Salary":[{Description:[{opr:"regex",value:["keeping","housekeeping","house keeping","Housekeeping.+Salary","House keeping.+Salary","house-keeping.+salary","housekeeping.+ladies","hk.+salary","hyrunni","sunanda"]}]}],"Garden Maintenance":[{Description:[{opr:"regex",value:["garden","gardner","Gardner.+Salary","garden.+work","Manure"]}]}],"Garbage Collection Vendor / BBMP":[{Description:[{opr:"having",value:["SYED ALI BASHA","RR CLEANING","RR CLEAN"]}]}],"Borewell And Motor Maintenance":[{Description:[{opr:"having",value:["borewell","motor","coil","winding"]}]}],"Lift Maintenance":[{Description:[{opr:"regex",value:["JOHNSON.+LIFTS","Lift"]}]}],"HK Items Purchased":[{Description:[{opr:"regex",value:["Housekeeping.+Items","Housekeeping.+Material","hk.+item","HK.+Material","bleaching","garbage drum","powder","mop","dust","dustbin","soap","detergent","broom","switch","tubelight","switch","light","bulb","Phenoyl","powder","phenoyl","sanitizer","cleaner","dettol","bottle","neem oil","tap","kerosene"]}]}],"Electrical / Plumbing Repairs":[{Description:[{opr:"having",value:["electric repair","electric work","electric","Chamundi","plumbing"]}]}],"Septic Tank Repairs / Cleaning":[{Description:[{opr:"having",value:["septik","septic","septic tank","sewage","sewage tank","sewage work","sewage pipe"]}]}],"Water Tanks Cleaning":[{Description:[{opr:"regex",value:["water.+tank","cauvery","kaveri"]}]}],"Generator Maintenance and Repair":[{Description:[{opr:"regex",value:["venus.+energy","kirloskar","generator"]}]}],"Savings Bank SMS Charges/Cheque book":[{Description:[{opr:"regex",value:["SMS .+Alert","cheque.+book","charges","chq.+book"]}]}],"Health Club Maintenance":[{Description:[{opr:"having",value:["gym","FITNESS","sports"]}]}],"Festival/Holiday Celebration":[{Description:[{opr:"regex",value:["diwali.+work","diwali","festival","celebration","pooja","pongal","independence","republic","sweets","flag"]}]}],"Drinking Water for Employees":[{Description:[{opr:"having",value:["drinking","drinking water","mineral water","water purchase"]}]}],Diesel:[{Description:[{opr:"regex",value:["Diesel"]}]}],"BAF Subscription Charges":[{Description:[{opr:"regex",value:["BAF","BAF Subscription"]}]}],"Annual Bonus":[{Description:[{opr:"regex",value:["bonus"]}]}],"Interest on account":[{Description:[{opr:"having",value:["89630100005613"]}]}],"FD Deposit":[{Description:[{opr:"having",value:["TO TRANSFER","Repayment Credit"]}]}],"Tenant Deposit from the Owners":[{Credit:[{opr:"in",value:["10,000.00","10000"]}]}],"Apartment Work By Security and Others":[{Description:[{opr:"regex",value:["Apartment.+Work","Cleaning.+Rain Water"]}]}],"Apartment Safety":[{Description:[{opr:"having",value:["sanitization","sanitizing","mask","sheild","shield","spray","cutting tree","fire","extinguisher","rat poison"]}]}],"Apartment developments":[{Description:[{opr:"having",value:["stationery","pen","paper","folder","files","notebook","note book","note-book","entry book","reciept book","bought","purchased","purchase of","cash voucher"]}]}],"Apartment repairs related":[{Description:[{opr:"having",value:["cement work","cement","service","repair","spanner","fixing","fixed"]}]}],"Misc expenses":[{Description:[{opr:"having",value:["tea","coffee"]}]}],"Fine / Extra Payment Received":[{Description:[{opr:"having",value:["maintenance","neft","upi","imps"]}],Credit:[{opr:"regex",value:["\\d"]}]}],"Other Income":[{Description:[{opr:"having",value:["income","other"]}],Credit:[{opr:">",value:0}]}],"Cash Withdrawal / in hand":{or:[{Description:[{opr:"regex",value:["cash","withdrawal","bank","basavaraj","carry.+forwarded","self"]}]},{"Cheque No":[{opr:"regex",value:["\\d+"]}]}]},"Deposit to RD account":[{Description:[{opr:"having",value:["3715125","SI:89630300010611"]}]}]},st={"001":[{Description:[{opr:"having",value:["khadir","MOHAMEDABDULKHA"]}]}],"002":[{Description:[{opr:"having",value:["jyotiprakash.jpl.99","jyoti prakash","jyotiprakash","shainv","potti","MAHESH"]}]}],"003":[{Description:[{opr:"having",value:["gulshan","padma","6364883334","subhrojyoti","6289470044"]}]}],"004":[{Description:[{opr:"having",value:["ANAND ESHWARDAS","ANAND","ESHWARDAS"]}]}],"005":[{Description:[{opr:"having",value:["KOPRESH"]}]}],"007":[{Description:[{opr:"having",value:["007"]}]}],"008":[{Description:[{opr:"having",value:["NITHIN","/008","Repaka"]}]}],"009":[{Description:[{opr:"having",value:["rutvijkanzaria","PRATIK","9120182537"]}]}],"010":[{Description:[{opr:"having",value:["ANANTH","BHASKAR","PAKALAPATI"]}]}],"011":[{Description:[{opr:"having",value:["AKARSH","AKARSHPRAVEENRAJ"]}]}],"012":[{Description:[{opr:"having",value:["kbg2000@okicici","K B GANESH","GANESH","VIVEKNAYAK","VIVEK NAYAK","8489950068"]}]}],101:[{Description:[{opr:"having",value:["VIJAYAKUMAR T","VIJAYAKUMAR","NIHARIKA","NIHARIKA PODDAR"]}]}],102:[{Description:[{opr:"having",value:["ARNAB","CHAKRABORTY","ARNABCHAKRABORT"]}]}],103:[{Description:[{opr:"having",value:["KRISHNA KUMAR","KRISHNAKUMAR"]}]}],104:[{Description:[{opr:"having",value:["AMIT KUMAR","KARMAKAR","AMITKUMAR"]}]}],105:[{Description:[{opr:"having",value:["JOHN PINTO","JOHN","MURUGAN","VIKASVERMA","VIKAS VERMA","MB105","105MAINTENA","8892757591"]}]}],106:[{Description:[{opr:"having",value:["mr.uttammohanty","uttam"]}]}],107:[{Description:[{opr:"having",value:["POLAKALA","NARAYANA PRASAD"]}]}],108:[{Description:[{opr:"having",value:["EMMANUEL RAJA A","EMMANUEL"]}]}],109:[{Description:[{opr:"having",value:["K S A RAJA RAM KUMAR","RAJARAMKUMAR"]}]}],110:[{Description:[{opr:"having",value:["SONYKUMARI","SONY KUMARI","PAVAN DEVARU","PAVANDEVARU","MOBLTA"]}]}],111:[{Description:[{opr:"having",value:["SENTHILKUMAR","SENTHIL"]}]}],112:[{Description:[{opr:"having",value:["ARINDAM"]}]}],201:[{Description:[{opr:"having",value:["ESWAR KRISHNAN","ESWAR","KARTHIKEYAN","flat201","ARIJIT"]}]}],202:[{Description:[{opr:"having",value:["SRIHARSHA","SRI HARSHA"]}]}],203:[{Description:[{opr:"having",value:["NILOTPALDAS"]}]}],204:[{Description:[{opr:"having",value:["AMLANJYOTI","AMLAN"]}]}],205:[{Description:[{opr:"having",value:["VIKRAMADITYA","IKRAMADITYA","SUNDARRAJU"]}]}],206:[{Description:[{opr:"having",value:["PINAKI","vishnupb619"]}]}],207:[{Description:[{opr:"having",value:["8015616123","RAVI TEJA","tr.1993@axisb","SRINIVAS","prashant.dombale"]}]}],208:[{Description:[{opr:"having",value:["JESUDOSS"]}]}],209:[{Description:[{opr:"having",value:["MULUKUTLA","AJU JAMES","AJUJAMES","T R RAJARAM","TRRAJARAM","CHALAPATHI"]}]}],210:[{Description:[{opr:"having",value:["TARANBIR","IMPSMBRSur"]}]}],211:[{Description:[{opr:"having",value:["9972528008","pranjan"]}]}],212:[{Description:[{opr:"having",value:["SURAJIT"]}]}],301:[{Description:[{opr:"having",value:["PRABUDH"]}]}],302:[{Description:[{opr:"having",value:["BALAJI"]}]}],303:[{Description:[{opr:"having",value:["SURENDRA"]}]}],304:[{Description:[{opr:"having",value:["MEHDI"]}]}],305:[{Description:[{opr:"having",value:["VIVIN"]}]}],306:[{Description:[{opr:"having",value:["ASHIM","DEBAJYOTI","MUTHIAH"]}]}],307:[{Description:[{opr:"having",value:["SAMPREETH","maddyrocks"]}]}],308:[{Description:[{opr:"having",value:["PRAHLAD"]}]}],309:[{Description:[{opr:"having",value:["7406849918","prasad.kiran","kbv018@okhdfcbank"]}]}],310:[{Description:[{opr:"having",value:["PREMA"]}]}],311:[{Description:[{opr:"having",value:["GURUPRASADA","CHOKKADI"]}]}],312:[{Description:[{opr:"having",value:["SHAKTHI","VINAYAK"]}]}],401:[{Description:[{opr:"having",value:["HARISHA"]}]}],402:[{Description:[{opr:"having",value:["cooldharsha","DHARSHA","JITHA","JITHAJAMES","JITHA JAMES","geetha.vaidyanathan","aprabhu1983@okicici"]}]}],403:[{Description:[{opr:"having",value:["8147758124","shaheer"]}]}],404:[{Description:[{opr:"having",value:["NOBROKER","/404Main","MOHAMMED SAIF"]}]}],405:[{Description:[{opr:"having",value:["SANTOSHKUMAR","/405main","SANTHOSH KUMAR","MALLA"]}]}],406:[{Description:[{opr:"having",value:["PRAVEENVIJAY","PRAVEEN VIJAY"]}]}],407:[{Description:[{opr:"having",value:["GALLA","VARADARAJU"]}]}],408:[{Description:[{opr:"having",value:["UDAY KIRAN","UDAY","YAGNAMURTHY"]}]}],409:[{Description:[{opr:"having",value:["Jeevanantham"]}]}],410:[{Description:[{opr:"having",value:["SIVASANKAR","HANUMANTHA","GANGJI","rohinimh19","ROHINI","MALLIKARJUN","koyena","koyena98@oksbi","chiranjeev"]}]}],411:[{Description:[{opr:"having",value:["NATESAN","ADITYA KOLLURI","ADITYAKOLLURI","santumahapatra","santu mahapatra","HIMANSHU TIWARI"]}]}],412:[{Description:[{opr:"having",value:["CHIRANJAN","PAVITHRADM","PAVITHRA"]}]}]};class ot{constructor(e){this.catFieldMap=void 0,this.catFieldMap=e}run(e){const t=Object.keys(this.catFieldMap);e.forEach((e=>{if(!e.Flat){const a=t.find((t=>{const a=this.catFieldMap[t];let n;if(Array.isArray(a))n=a.every((t=>new nt(t).run(e,!0)));else{n=new Ze(a).run((t=>new nt(t).run(e,!0)))}return n}));e.Flat=a}}))}}let ct=function(e){return e["Audit Fees"]="Audit Fees",e.BWSSB="BWSSB",e.Diesel="Diesel",e.Bescom="Bescom",e["House Keeping Salary"]="House Keeping Salary",e.Security="Security",e["Garden Maintenance"]="Garden Maintenance",e["Garbage Collection Vendor / BBMP"]="Garbage Collection Vendor / BBMP",e["Borewell And Motor Maintenance"]="Borewell And Motor Maintenance",e["Annual Bonus"]="Annual Bonus",e["Lift Maintenance"]="Lift Maintenance",e["HK Items Purchased"]="HK Items Purchased",e["Health Club Maintenance"]="Health Club Maintenance",e["Electrical / Plumbing Repairs"]="Electrical / Plumbing Repairs",e["Apartment repairs related"]="Apartment repairs related",e["Apartment Painting"]="Apartment Painting",e["CCTV / Intercomm"]="CCTV / Intercomm",e["Misc expenses"]="Misc expenses",e["Apartment developments"]="Apartment developments",e["Apartment Work By Security and Others"]="Apartment Work By Security and Others",e["Septic Tank Repairs / Cleaning"]="Septic Tank Repairs / Cleaning",e["Water Tanks Cleaning"]="Water Tanks Cleaning",e["Generator Maintenance and Repair"]="Generator Maintenance and Repair",e["Savings Bank SMS Charges/Cheque book"]="Savings Bank SMS Charges/Cheque book",e["Festival/Holiday Celebration"]="Festival/Holiday Celebration",e["Drinking Water for Employees"]="Drinking Water for Employees",e["BAF Subscription Charges"]="BAF Subscription Charges",e["Maintenance Collection"]="Maintenance Collection",e["Income Tax Refund"]="Income Tax Refund",e["Other Income"]="Other Income",e["Interest on account"]="Interest on account",e["Fine / Extra Payment Received"]="Fine / Extra Payment Received",e["Corpus Fund"]="Corpus Fund",e["Tenant Deposit from the Owners"]="Tenant Deposit from the Owners",e["FD Deposit"]="FD Deposit",e}({});const lt=()=>({type:D.LOAD_TRANS}),dt=e=>({type:D.LOAD_CASH_TRANS_SUCCESS,payload:e}),ut=e=>({type:D.LOAD_ONLINE_TRANS_SUCCESS,payload:e}),ht=e=>({type:D.LOAD_CASH_TRANS_FAILURE,payload:e}),pt=e=>({type:D.LOAD_ONLINE_TRANS_FAILURE,payload:e}),gt=e=>({type:D.UPDATE_MONTHLY_SPLIT,payload:e}),bt=e=>({type:D.UPDATE_MONTHLY_MAINT_SPLIT,payload:e});function jt(e,t){return e.filter((e=>{if(e.Category){return e.Category.split(",").some((e=>{const[a]=e.split("(");return t.indexOf(a.trim())>-1}))}return!1}))}function mt(e,t){return a=>{a(lt()),e.forEach((e=>{const a=e.Category,n=e.Date;if(a&&n){var i;const r=a.split(","),s=e.Debit&&"0"!==(null===(i=e.Debit)||void 0===i?void 0:i.toString());let o=s?parseFloat(e.Debit.toString().replace(/,/g,"")):parseFloat(e.Credit.toString().replace(/,/g,""));r.forEach((a=>{let i=a;if(a.indexOf("(")>-1){const e=a.split("(");[i]=e,o=parseFloat(e[1].replace(/(\(|\))/g,"").replace(/,/g,""))}!function(e,t,a,n,i,r){const s=a.replace(/\//g,"-"),o=M()(s,"DD-MM-YYYY").format("MMM-YY");e||(e={});e[o]||(e[o]={});i&&(r=-r);r&&"number"===typeof r?e[o][n]?e[o][n]+=r:e[o][n]=r:console.log("cat",n,o,t)}(t,e,n,i.trim(),!!s,o)}))}})),a(gt({...t}))}}var Ot=a(884),vt=a(885),yt=a(886),At=a(887),St=a(888),ft=a(889);var Ct=function(){const e=Object(c.c)((e=>e.trans)),t=Object(c.b)();Object(n.useEffect)((()=>{t(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cash Transactions";return t=>{t(lt()),We.init().then((()=>{We.getSheetByTitleAsJson(e).then((e=>{new it(rt).run(e),new ot(st).run(jt(e,[ct["Maintenance Collection"],ct["Corpus Fund"]])),t(dt(e)),We.saveSheetWithJSON(e)})).catch((e=>{t(ht(e.message))}))}))}}())}),[t]);const a=Object(n.useMemo)((()=>e.cashTransData),[e]),i=Object(n.useMemo)((()=>{let e=[];return a&&a.length>=1&&(e=Object.keys(a[0])),e}),[a]);return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)("div",{className:"cash-trans",children:[e.loading&&Object(re.jsx)(Ot.a,{}),!e.loading&&Object(re.jsxs)(vt.a,{children:[Object(re.jsx)(yt.a,{children:Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{children:"Sl. No."}),i.map((e=>Object(re.jsx)(St.a,{children:e},e)))]})}),Object(re.jsx)(ft.a,{children:!!a&&a.map(((e,t)=>Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{children:t+1}),i.map((t=>Object(re.jsx)(St.a,{children:"Date"!==t?e[t]:M()(e[t],"DD/MM/YYYY").format("DD/MM/YYYY")},`${t}-${e[t]}`)))]},JSON.stringify(e))))})]})]})})};var xt=function(){const e=Object(c.c)((e=>e.trans)),t=Object(c.b)();Object(n.useEffect)((()=>{t(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Online Transactions";return t=>{t(lt()),We.init().then((()=>{We.getSheetByTitleAsJson(e).then((e=>{new it(rt).run(e),new ot(st).run(jt(e,[ct["Maintenance Collection"],ct["Corpus Fund"]])),t(ut(e)),We.saveSheetWithJSON(e)})).catch((e=>{t(pt(e.message))}))}))}}("Online Transactions"))}),[t]);const a=e.onlineTransData,i=Object(n.useMemo)((()=>{let e=[];return a&&a.length>1&&(e=Object.keys(a[0])),e}),[a]);return Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)("div",{className:"online-trans",children:[e.loading&&Object(re.jsx)(Ot.a,{}),!e.loading&&Object(re.jsxs)(vt.a,{children:[Object(re.jsx)(yt.a,{children:Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{children:"Sl. No."}),i.map((e=>Object(re.jsx)(St.a,{children:e},e)))]})}),Object(re.jsx)(ft.a,{children:!!a&&a.map(((e,t)=>Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{children:t+1}),i.map((t=>Object(re.jsx)(St.a,{children:"Date"!==t?e[t]:M()(e[t],"DD-MM-YYYY").format("DD/MM/YYYY")},`${t}-${e[t]}`)))]},JSON.stringify(e))))})]})]})})};a(747);var Dt=function(){const[e,t]=Object(n.useState)(),[a,i]=Object(n.useState)("cash"),[r,s]=Object(n.useState)(""),l=Object(c.b)(),d=Object(c.c)((e=>e.sheet)),{initError:u}=d,h=Object(c.c)((e=>e.trans)),{monthlyCatSplit:p,cashTransData:g,onlineTransData:b,monthlyMaintSplit:j}=h;Object(n.useEffect)((()=>{r&&l(function(e){return t=>{t(qe());const a=k(e);a.res?t(Ve({...U()})):t(Ge(a.error))}}(r))}),[l,r]);const m=Object(n.useCallback)((()=>{g&&b&&(l(mt([...g,...b],{})),i(void 0))}),[g,l,b]),O=Object(n.useCallback)((()=>{if(g&&b){const a=jt([...g,...b],[ct["Maintenance Collection"]]);l((e=a,t={},a=>{a(lt()),e.forEach((e=>{const a=e.Flat,n=e.Date,i=e.Category;if(a&&n&&i){const r=M()(n,"DD/MM/YYYY").format("MMM-YY");t||(t={}),t[r]||(t[r]={});let s=parseFloat(e.Credit.toString().replace(/,/g,""));if(i.indexOf("(")>-1){const e=i.match(/Maintenance Collection\s+\((\d+(\.\d+)?)\)/);e&&(s=parseFloat(e[1]))}s&&"number"===typeof s?t[r][a]?t[r][a]+=s:t[r][a]=s:console.log("Flat",a,r,e)}})),a(bt({...t}))})),i(void 0)}var e,t}),[g,l,b]),v=Object(n.useCallback)((()=>{We.updateCategorySheet(p).then((()=>{console.log("Saved"),t("Summary Updated")}))}),[p]),y=Object(n.useCallback)((()=>{We.udpateMaintenanceSheet(j).then((()=>{console.log("Saved"),t("Maintenence Split Updated")}))}),[j]),[A,S]=Object(n.useState)(0),f=Object(n.useMemo)((()=>["Cash Transactions","Online Transactions","Map Transactions","Categorize Maintenance"]),[]),C=Object(n.useCallback)((e=>!1),[]),x=Object(n.useCallback)((e=>!1),[]),D=Object(n.useCallback)((()=>{switch(A){case 3:i(void 0),S(2);break;case 2:i("online"),S(1);break;case 1:i("cash"),S(0)}}),[A]),T=Object(n.useCallback)((()=>{}),[]),E=Object(n.useCallback)((()=>{switch(A){case 0:i("online"),S(1);break;case 1:i(void 0),S(2),m();break;case 2:i(void 0),S(3),O()}}),[A,O,m]);return Object(re.jsxs)("div",{children:[!!e&&Object(re.jsx)(o.a,{severity:"info",children:e}),!!u&&Object(re.jsx)(o.a,{severity:"error",children:u}),Object(re.jsxs)("div",{className:"stepper-header",children:[Object(re.jsx)(Ye.a,{className:"steps",activeStep:A,children:f.map(((e,t)=>{const a={},n={};return C(t)&&(n.optional=Object(re.jsx)(Le.a,{variant:"caption",children:"Optional"})),x(t)&&(a.completed=!1),Object(re.jsx)(Be.a,{...a,children:Object(re.jsx)(Pe.a,{...n,children:e})},e)}))}),Object(re.jsxs)("div",{className:"nav",children:[Object(re.jsx)(ie.a,{disabled:0===A,onClick:D,children:"Back"}),C(A)&&Object(re.jsx)(ie.a,{variant:"contained",color:"primary",onClick:T,children:"Skip"}),Object(re.jsx)(ie.a,{variant:"contained",color:"primary",onClick:E,children:A===f.length-1?"Save":"Next"})]})]}),Object(re.jsxs)("div",{className:"control",children:[2===A&&Object(re.jsx)(ie.a,{variant:"outlined",disabled:!p,onClick:v,children:"Save Categorized"}),"\xa0\xa0\xa0",3===A&&Object(re.jsx)(ie.a,{variant:"outlined",disabled:!j,onClick:y,children:"Save Split"})]}),!u&&!!d.sheetConfig.secret&&Object(re.jsxs)(re.Fragment,{children:[0===A&&Object(re.jsx)(Ct,{}),1===A&&Object(re.jsx)(xt,{}),2===A&&!!p&&Object(re.jsx)(ke.a,{style:ke.b,data:p}),3===A&&!!j&&Object(re.jsx)(ke.a,{style:ke.b,data:j})]})]})};var Tt=()=>Object(re.jsx)(Dt,{}),Et=a(423),It=a.n(Et),Nt=a(900),wt=a(436),Rt=a(895);function Mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t&&0!==t.length||(t=Object.values(ct));let a="";const n=[],i=[];return e.split(/[\s_]/m).filter((e=>e&&"/"!==e)).forEach((e=>{/^\d{1,2}-\d{1,2}-\d{2,4}$/.test(e)&&n.push(e),/^\d+(\.\d{1,2})?-?$/.test(e)&&i.push(e)})),a||(a=e.replace(n[0],""),a=a.replace(i[0],"").replace(/_/g,""),a=function(e,t){const a=new Map;e.forEach((e=>{let n=0;const i=e.toLowerCase();t.forEach((e=>{i.includes(e.toLowerCase())&&(n+=1)})),a.set(e,n)}));const n=[...Array.from(a)].sort(((e,t)=>t[1]-e[1]));if(n.length>0&&0!==n[0][1])return n[0][0];return""}(t,[a])||a),{date:n[0],amount:parseFloat(i[0])||0,description:a}}var kt=a(82),Yt=a(414),Lt=a.n(Yt);var Bt=class{async pdfDataUriToCanvas(e){return new Promise((t=>{const a=document.getElementById("myIframe");a.onload=async()=>{var e;const n=null===(e=a.contentWindow)||void 0===e?void 0:e.document;if(null!==n&&void 0!==n&&n.body){const e=(await Lt()(n.body)).toDataURL("image/png"),a=document.getElementById("cap-image");a&&a.setAttribute("src",e),t(e)}else t(void 0);a.className=""},a.className="active",a.src=e}))}async convert(e){const t=await fetch(e).then((e=>e.arrayBuffer())),a=await kt.PDFDocument.load(t),n=await kt.PDFDocument.create(),[i]=await n.copyPages(a,[0]),{dict:r}=i.node,s=r.get(kt.PDFName.of("Resources")).get(kt.PDFName.of("XObject"));if(!s)return console.log("No XObject resources found on this page."),[];const o=[];return Object.entries(s.dict).forEach((e=>{var t;let[n,i]=e;const r=a.context.lookup(i);if(r&&r.dict&&"/Image"===(null===(t=r.dict.get(kt.PDFName.of("Subtype")))||void 0===t?void 0:t.toString())){var s,c,l;const e=r.dict.context.lookupMaybe(r.dict.dataStart,(e=>"object"===typeof e?e:null)),t=null===(s=r.dict.get(kt.PDFName.of("BitsPerComponent")))||void 0===s?void 0:s.toString(),a=null===(c=r.dict.get(kt.PDFName.of("ColorSpace")))||void 0===c?void 0:c.toString(),i=null===(l=r.dict.get(kt.PDFName.of("Filter")))||void 0===l?void 0:l.toString();let d=".raw";i&&(i.includes("/DCTDecode")?d=".jpg":i.includes("/FlateDecode")?d=".png":i.includes("/JBIG2Decode")?d=".jbig2":i.includes("/JPXDecode")&&(d=".jp2")),e&&(o.push({name:n,path:"",properties:{bitsPerComponent:t,colorSpace:a,filter:i}}),console.log("Extracted image: "))}})),o}base64ToUint8Array(e){const t=atob(e),{length:a}=t,n=new Uint8Array(a);for(let i=0;i<a;i+=1)n[i]=t.charCodeAt(i);return n}uint8ArrayToBase64(e){let t="";const a=e.length;for(let n=0;n<a;n+=1)t+=String.fromCharCode(e[n]);return btoa(t)}uint8ArrayToBase64Image(e){return`data:${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png"};base64,${this.uint8ArrayToBase64(e)}`}dataURItoBlobURL(e){const[t,a]=e.split(","),n=/:(.*?);/.exec(t);if(!n)throw new Error("Invalid data URI format");const i=n[1],r=atob(a),s=new Uint8Array(r.length);for(let c=0;c<r.length;c+=1)s[c]=r.charCodeAt(c);const o=new Blob([s],{type:i});return URL.createObjectURL(o)}};const Pt="gemma3",Ut={getVision:async e=>{const t=await Ut.getVisionRequestBody(e);let a=window.OLLAMA_API_URL||"http://localhost:11434";a.endsWith("/")&&(a=a.slice(0,-1));const n=`${a}/api/chat`,i={method:"POST",body:JSON.stringify(t),redirect:"follow"};try{const e=await fetch(n,i);return console.log(e),e.json()}catch(r){return console.error("Error fetching vision:",r),null}},getCategory:async e=>{const t=Object.values(ct),a=await Ut.getCatRequestBody(e,t),n={method:"POST",body:JSON.stringify(a),redirect:"follow"};try{const e=await fetch("http://localhost:11434/api/chat",n);return console.log(e),e.json()}catch(i){return console.error("Error fetching vision:",i),null}},getCatRequestBody:async(e,t)=>{const a=t.join(", ");return{model:Pt,messages:[{role:"system",content:"You are categorizer of bills. Your output should be in JSON format. { category: string }"},{role:"user",content:`Followng is the list of categories.\n${a}\nBased the following description of the bill, figure out the category.\nDescription: ${e}`}],stream:!1}},getVisionRequestBody:async e=>{const t=Object.values(ct).join(", "),a=[],n=await Ut.urlToBase64(e);if(n.startsWith("data:application/pdf;base64,")){const t=new Bt,n=await t.convert(e);if(null!==n&&void 0!==n&&n.length){const e=await Promise.all(n.map((async e=>e.replace(/data:.+;base64,/,""))));a.push(...e)}}else console.log("Data URI: ",n),a.push(n.replace(/data:.+;base64,/,""));return{model:Pt,stream:!1,options:{seed:101,temperature:.1},format:{type:"object",properties:{date:{type:"string"},description:{type:"string"},amount:{type:"integer"},cash:{type:"boolean"},category:{type:"string"}},required:["date","amount","cash","description","category"]},messages:[{role:"user",content:`What text do you read in this image? Fetch data like Amount, Date, is Cash or Cheque transaction and Description.\nAmount: Amount should be the total amount mentioned in the bill.\nCash: Default is cash transaction unless the word 'cheque' found.\nDate: Date format should be 'dd/mm/yyyy'. Date should fall mostly under current financial year. If the year is not found, use the current year. If day is not found, use '01' as day. If month is not found, use '03' as month.\nCategory: Figure out the category based on the image input. Default should be "Miscelleneous Expenses". Followng is the list of categories.\n${t}\n`},{role:"user",images:a}]}},urlToBase64:async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch image: ${t.statusText}`);const a=await t.blob();return await Ut.blobToBase64(a)}catch(t){throw console.error("Error converting URL to Base64:",t),t}},blobToBase64:e=>new Promise(((t,a)=>{const n=new FileReader;n.readAsDataURL(e),n.onloadend=()=>t(n.result),n.onerror=a}))};var _t=Ut,Ht=a(39);class Ft{constructor(){this.chat=void 0,this.inProgress=!1,this.initProm=void 0;const e=U().geminiKey||"",t=new Ht.a(e).getGenerativeModel({model:"gemini-1.0-pro"}),a=[{category:Ht.c.HARM_CATEGORY_HARASSMENT,threshold:Ht.b.BLOCK_MEDIUM_AND_ABOVE},{category:Ht.c.HARM_CATEGORY_HATE_SPEECH,threshold:Ht.b.BLOCK_MEDIUM_AND_ABOVE},{category:Ht.c.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ht.b.BLOCK_MEDIUM_AND_ABOVE},{category:Ht.c.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ht.b.BLOCK_MEDIUM_AND_ABOVE}];this.chat=t.startChat({generationConfig:{temperature:.9,topK:0,topP:1,maxOutputTokens:2048},safetySettings:a}),this.initChat("You are a bill/receipt data extractor. You have to extract the date (dd-mm-YYYY), amount (in number format), description (in short) and isChequeIssued (is cheque issued?). Expect the following date formats as input 'dd-mm-YYYY', 'dd-mm-YY', 'dd/mm/YYYY' and 'dd/mm/YY'. Also sometimes date delimter has been miss-interperated as numberical one. Ex. 25/7124 can be interperated as 25/7/24 which is of format, 'dd/mm/YY'. Also expect multiple numbers, provide the largest number as amount. Don't expect amount to be larger than 6 digits. Also expect the whole input in tabular format separated by newlines and tabs. The whole data is a bill information. If it is electricity bill, Description should be 'Electricity bill'. If it is a BWSSB or Water bill, the description should be BWSSB. Don't use text havig word 'Total' as description. If input is a bill of items purchased, find the reason like 'Motor repair'. If not found, say 'Items Purchased' followed by a line item.")}async initChat(e){this.inProgress=!0;const t=`Following is the context for future chat messages.\n${e}`;this.initProm=this.chat.sendMessage(t)}async extractData(e){this.inProgress&&(await this.initProm,this.inProgress=!1);try{const t=await this.chat.sendMessage(`What is the date (dd-mm-YYYY), amount (in number format), description (in short) and isChequeIssued (is cheque issued?)', extracted from the following text (comes after new line) in JSON format?\n${e}`),{response:a}=t,n=a.text().replace(/```/g,"").replace(/JSON/gi,""),i=JSON.parse(n),r=Array.isArray(i)?i[0]:i;return{date:r.date||r.Date,description:r.description||r.Description,amount:r.amount||r.Amount,isChequeIssued:"undefined"!==typeof r.isChequeIssued?r.isChequeIssued:r.IsChequeIssued}}catch(t){console.log(t)}return{amount:0,date:"",description:"",isChequeIssued:!1}}static getInstance(){return Ft.instance||(Ft.instance=new Ft),Ft.instance}}Ft.instance=void 0;const Kt=!0;function Jt(e){fe(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").then((t=>{e(t)}))}const Wt=async(e,t)=>{await async function(e,t,a,n){let i={Date:e,Debit:t,Category:a};try{await We.searchUpdateRecord("Online Transactions",i,"Bill",n)}catch(r){i={Debit:t,Category:a},await We.searchUpdateRecord("Online Transactions",i,"Bill",n)}}(e.date,e.amount,e.category||"",Vt(t))};const qt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Cash Transactions";await We.getSheetByTitle(t)||await We.addSheet({headerValues:["Date","Description","Item Description/Purpose","Qty","Price","Debit","Credit","Total","Category","Flat","Bill"],title:t});const a=JSON.parse(JSON.stringify(e));return await We.updateSheetWithJSON(a,t),!0},Vt=e=>`https://drive.google.com/file/d/${e}/preview`,Gt=(e,t)=>{var a,n,i;const r={Date:null!==(a=e.date)&&void 0!==a?a:"",Description:null!==(n=e.description)&&void 0!==n?n:"",Debit:null!==(i=e.amount)&&void 0!==i?i:0,Credit:0,Category:e.category,Total:0};return t&&(r.Bill=Vt(t)),r},zt=(e,t)=>{_t.getCategory(e);const a=Gt(e);!a.Description&&t&&(a.Description=t);new it(rt).run([a]),e.category=a.Category,!e.description&&e.category&&(e.description=e.category)},Zt={};function Xt(e,t){let a={};return new Promise((n=>{if(e&&e.indexOf("_")>-1&&(a=Mt(e)),a.amount&&a.date&&a.description){const e={...a};n(e)}else if(Zt[t.id])n(Zt[t.id]);else{const{googleAPIKey:e}=U(),i=`https://www.googleapis.com/drive/v2/files/${t.id}?key=${e}&alt=media&source=downloadUrl`,r=Kt?_t.getVision.bind(_t):Te,s=Kt?$t:Qt;ea(i,r).then((async e=>{const i=await s(e,a);Zt[t.id]=i,n(i)}))}}))}const $t=async e=>{const t=JSON.parse(e.message.content),a=JSON.parse(e.message.content);if(a.date&&10===a.date.length||(a.date="01-01-2024"),a.isChequeIssued=!t.cash,!a.category){await _t.getCategory(t.description)&&(a.category=JSON.parse(e.message.content).category)}return Promise.resolve(a)},Qt=async(e,t)=>{var a;let n;if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.ParsedResults){var i;const t=(null===(i=e.data.ParsedResults[0])||void 0===i?void 0:i.ParsedText)||"",a=await Ft.getInstance().extractData(t);n={...a,isChequeIssued:"boolean"===typeof a.isChequeIssued?a.isChequeIssued:"true"===a.isChequeIssued},zt(n,t.toLowerCase())}else n={...t},zt(n);return n},ea=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return new Promise(((n,i)=>{t(e).then((async i=>{if(a-=1,i||0===a)n(i);else if(!i){const i=await ea(e,t,a);n(i)}}))}))};var ta=a(861),aa=a(416),na=a(899),ia=a(891),ra=a(892),sa=a(864),oa=a(870),ca=a(898),la=a(422),da=a.n(la),ua=a(421),ha=a.n(ua),pa=a(862),ga=a(415),ba=a.n(ga),ja=a(43),ma=a.n(ja);a(756);var Oa=e=>{let{transaction:t,previewBill:a,expenseCategories:i,callback:r}=e;const[s,o]=Object(n.useState)(!1),[c,l]=Object(n.useState)(t),[d,u]=Object(n.useState)(!1),h=Object(n.useCallback)((async()=>{o(!0);const e=await Xt("",t.bill);l({...t,...e,isCash:!e.isChequeIssued}),o(!1)}),[t]),[p,g]=Object(n.useState)({date:"",amount:"",description:"",category:"",transactionType:""}),b=Object(n.useCallback)((e=>{const{name:t,value:a}=e.target||e;l((e=>({...e,[t]:a})))}),[]),j=Object(n.useCallback)((()=>{let e=!1;if(c.amount?p.amount="":(p.amount="Enter a valid amount",e=!0),c.date&&"invalid date"!==c.date.toLowerCase()?p.date="":(p.date="Enter a valid date",e=!0),c.description?p.description="":(p.description="Enter a valid description",e=!0),c.category?p.category="":(p.category="Select a category",e=!0),e)g({...p});else{const e=JSON.parse(JSON.stringify(c));r(e),u(!0)}}),[r,p,c]);return Object(n.useEffect)((()=>{if(!c.date){const e="01-04-2024";l({...c,date:e})}}),[c,c.date]),Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)(At.a,{className:d?"form-completed bill-row":"bill-row",children:[Object(re.jsx)(St.a,{children:Object(re.jsx)(ce.a,{disabled:s,onMouseEnter:e=>a(e,t.bill),children:Object(re.jsx)(ba.a,{})})}),Object(re.jsx)(St.a,{className:p.date?"cell-error":"",children:Object(re.jsx)(ia.a,{title:p.date,children:Object(re.jsx)("div",{className:"date-wrapper",children:Object(re.jsx)(aa.a,{dateAdapter:ta.a,children:Object(re.jsx)(pa.a,{disabled:s,format:"DD-MM-YYYY",closeOnSelect:!0,value:ma()(M()(c.date,"DD-MM-YYYY").format("YYYY-MM-DD")),onChange:e=>b({value:e.format("DD-MM-YYYY"),name:"date"})})})})})}),Object(re.jsx)(St.a,{className:p.description?"cell-error":"",children:Object(re.jsx)(ia.a,{title:p.description,children:Object(re.jsx)(ra.a,{name:"description",disabled:s,value:c.description,onChange:b,fullWidth:!0})})}),Object(re.jsx)(St.a,{className:p.amount?"cell-error":"",children:Object(re.jsx)(ia.a,{title:p.amount,children:Object(re.jsx)(ra.a,{name:"amount",type:"number",disabled:s,value:c.amount,onChange:b,fullWidth:!0})})}),Object(re.jsx)(St.a,{className:p.category?"cell-error":"",children:Object(re.jsx)(ia.a,{title:p.category,children:Object(re.jsx)(sa.a,{className:"bill-category",fullWidth:!0,disabled:s,name:"category",value:c.category,onChange:b,children:i.map((e=>Object(re.jsx)(oa.a,{value:e.key,children:e.label},e.key)))})})}),Object(re.jsx)(St.a,{children:Object(re.jsx)(ca.a,{name:"isCash",disabled:s,checked:!!c.isCash,value:!0,onClick:()=>b({name:"isCash",value:!c.isCash})})}),Object(re.jsxs)(St.a,{children:[!s&&Object(re.jsx)(ce.a,{disabled:s||d,"aria-label":"fetch",onClick:h,children:Object(re.jsx)(ha.a,{})}),Object(re.jsx)(ce.a,{disabled:s||d,"aria-label":"submit",onClick:j,children:Object(re.jsx)(da.a,{})})]})]},c.bill.id),s&&Object(re.jsx)(At.a,{className:"loader-row",children:Object(re.jsx)(na.a,{color:"success"})})]})};a(760);var va=e=>{let{transactions:t,expenseCategories:a,handleSubmit:n,handleSplit:r}=e;const[s,o]=i.a.useState(null),[c,l]=i.a.useState(),d=(e,t)=>{l(t),o(e.currentTarget)},u=Boolean(s),h=u?"simple-popover":void 0;return Object(re.jsxs)(re.Fragment,{children:[1===t.length&&Object(re.jsx)(ie.a,{className:"split-all","aria-label":"split",onClick:()=>r(t[0].bill),size:"small",children:"Split the Bill"}),Object(re.jsxs)(Nt.a,{component:wt.a,children:[Object(re.jsxs)(vt.a,{size:"small",children:[Object(re.jsx)(yt.a,{children:Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{children:"Bill Preview"}),Object(re.jsx)(St.a,{children:"Date"}),Object(re.jsx)(St.a,{children:"Description"}),Object(re.jsx)(St.a,{children:"Amount"}),Object(re.jsx)(St.a,{children:"Category"}),Object(re.jsx)(St.a,{children:"Is Cash"}),Object(re.jsx)(St.a,{children:"Action"})]})}),Object(re.jsx)(ft.a,{children:t.map((e=>Object(re.jsx)(Oa,{previewBill:d,transaction:e,expenseCategories:a,callback:t=>n(t,e.bill.id)},e.bill.id)))})]}),!!c&&Object(re.jsx)(Rt.b,{id:h,open:u,anchorEl:s,onClose:()=>{o(null),l(void 0)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(re.jsx)("iframe",{className:"expense-bill-img",src:Vt(c.id),title:"Expense Bill"})})]})]})},ya=a(894),Aa=a(877),Sa=a(901),fa=a(867),Ca=a(897),xa=a(873);a(761);var Da=e=>{let{callback:t,date:a,amount:i,description:r,category:s,image:o,handleClose:c,expenseCategories:l,mimeType:d,isChequeIssued:u}=e;const[h,p]=Object(n.useState)({date:M()(null!==a&&void 0!==a?a:"01-04-2024","DD-MM-YYYY").format("YYYY-MM-DD"),amount:null!==i&&void 0!==i?i:0,description:null!==r&&void 0!==r?r:"text",category:null!==s&&void 0!==s?s:"",isChequeIssued:u}),[g,b]=Object(n.useState)({date:"",amount:"",description:"",category:"",transactionType:""}),j=Object(n.useCallback)((e=>{const{name:t,value:a}=e.target;p((e=>({...e,[t]:a})))}),[]),m=Object(n.useCallback)((()=>{let e=!1;if(h.amount||(g.amount="Enter a valid amount",e=!0),h.date&&"invalid date"!==h.date.toLowerCase()||(g.date="Enter a valid date",e=!0),h.description||(g.description="Enter a valid description",e=!0),h.category||(g.category="Select a category",e=!0),e)b({...g});else{const e=JSON.parse(JSON.stringify(h));e.date=M()(e.date,"YYYY-MM-DD").format("DD-MM-YYYY"),t(e)}}),[t,g,h]);return Object(re.jsx)("div",{className:"expense-dialog",children:Object(re.jsxs)($.a,{open:!0,onClose:c,className:"bill-grid-dialog",fullWidth:!0,scroll:"paper",maxWidth:"xl",children:[Object(re.jsx)(Q.a,{children:"Form"}),Object(re.jsxs)(ee.a,{children:[d.startsWith("image/")&&Object(re.jsx)("iframe",{className:"expense-bill-img",src:Vt(o),title:"Expense Bill"}),"application/pdf"===d&&Object(re.jsx)("embed",{className:"expense-bill-img",src:Vt(o),title:"Expense Bill"}),Object(re.jsxs)("form",{children:[Object(re.jsxs)(ya.a,{variant:"outlined",fullWidth:!0,margin:"normal",error:!!g.transactionType,children:[Object(re.jsxs)(Aa.a,{"aria-label":"Transaction Type",name:"transactionType",value:h.isChequeIssued?"Online":"Cash",onChange:j,row:!0,children:[Object(re.jsx)(Sa.a,{value:"Cash",control:Object(re.jsx)(fa.a,{color:"primary"}),label:"Cash"}),Object(re.jsx)(Sa.a,{value:"Online",control:Object(re.jsx)(fa.a,{color:"primary"}),label:"Online"})]}),!!g.transactionType&&Object(re.jsx)(Ca.a,{children:g.transactionType})]}),Object(re.jsx)(ra.a,{type:"date",name:"date",label:"Date",value:h.date,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined",placeholder:"DD-MM-YYYY",error:!!g.date,helperText:g.date}),Object(re.jsx)(ra.a,{type:"number",name:"amount",label:"Amount",value:h.amount,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined",error:!!g.amount,helperText:g.amount}),Object(re.jsx)(ra.a,{type:"text",name:"description",label:"Description",value:h.description,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined",error:!!g.description,helperText:g.description}),Object(re.jsxs)(ya.a,{variant:"outlined",fullWidth:!0,margin:"normal",error:!!g.category,children:[Object(re.jsx)(xa.a,{children:"Category"}),Object(re.jsx)(sa.a,{name:"category",value:h.category,onChange:j,label:"Category",children:l.map((e=>Object(re.jsx)(oa.a,{value:e.key,children:e.label},e.key)))}),!!g.category&&Object(re.jsx)(Ca.a,{children:g.category})]})]})]}),Object(re.jsxs)(ne.a,{children:[Object(re.jsx)(ie.a,{onClick:()=>c(),color:"primary",children:"Cancel"}),Object(re.jsx)(ie.a,{onClick:m,color:"primary",children:"Submit"})]})]})})},Ta=a(875);var Ea=e=>{let{folders:t,handleClick:a}=e;const n=t.length?function(e){const t={APR:1,MAY:2,JUN:3,JUL:4,AUG:5,SEP:6,OCT:7,NOV:8,DEC:9,JAN:10,FEB:11,MAR:12};return e.sort(((e,a)=>t[e.name.toUpperCase()]-t[a.name.toUpperCase()])),e}(t):[];return Object(re.jsx)("div",{children:Object(re.jsx)(Ta.a,{container:!0,spacing:2,children:n.map(((e,t)=>Object(re.jsxs)(Ta.a,{item:!0,xs:2,onClick:()=>a(e.id,e.name),children:[Object(re.jsx)("img",{src:"/images/folder.jpg",id:`folder-${e.name}`,alt:`Folder ${t+1}`,style:{width:200,height:200,cursor:"pointer",padding:"5px"}}),Object(re.jsx)("h3",{style:{textAlign:"center"},children:e.name})]},`Image ${t+1}`)))})})};class Ia{constructor(){this.initProm=void 0,this.sheetIntialized=!1,this.sheets=new Map,this.initProm=We.init(),this.initProm.then((()=>{this.sheetIntialized=!0}))}async getSheet(e){return this.sheetIntialized||await this.initProm,new Promise(((t,a)=>{this.sheets.has(e)?t(this.sheets.get(e)):We.getSheetByTitle(e).then((n=>{n?(this.sheets.set(e,n),t(n)):a()}))}))}async getExpenseCategories(){return new Promise(((e,t)=>{let a=[];this.getSheet("Summary").then((t=>{const n=We.getColumnWithSheet(t,0).map((e=>e.value)),i=[];for(let e=1;e<n.length-1&&"Total Expense"!==n[e];e+=1)i.push(n[e]),a=i.map((e=>({key:e,label:e})));e(a)}))}))}async parseMonthlySheet(e){return(await e.getRows()).map((e=>({Date:M()(e.Date,"DD/MM/YYYY").toDate(),Description:e.Desc,"Cheque No":e.ChqNo,Debit:parseFloat(e.Amount)<0?parseFloat(e.Amount):0,Credit:parseFloat(e.Amount)>=0?parseFloat(e.Amount):0,Total:parseFloat(e.Balance),type:e.Type})))}getMonthData(e){return new Promise(((t,a)=>{this.getSheet(e).then((async e=>{const a=await this.parseMonthlySheet(e);t(a)})).catch((()=>{We.addSheet({headerValues:["Date","Desc","ChqNo","Amount","Type","Balance"],title:e}).then((a=>{this.sheets.set(e,a),t([])}))}))}))}pushSheetData(e,t){t.push({Date:M()(e.Date).format("DD-MM-YYYY"),Desc:e.Description,Balance:e.Total,Amount:e.Credit-e.Debit,ChqNo:e["Cheque No"],Type:e.type})}transCompare(e,t){return M()(e.Date).format("DD/MM/YYY")===M()(t.Date).format("DD/MM/YYY")&&e.Description===t.Description&&e.Debit===t.Debit&&e.Credit===t.Credit&&e.type===t.type}async mergeSheetData(e,t){const{transactions:a}=U().appData,n=[];return t.length>0?(a.forEach((e=>{-1===t.findIndex((t=>this.transCompare(t,e)))&&this.pushSheetData(e,n)})),t.forEach((e=>{-1===a.findIndex((t=>this.transCompare(t,e)))&&a.push(e)}))):a.forEach((e=>this.pushSheetData(e,n))),n.length&&await e.addRows(n),!0}async setMonthData(e){const t=await this.getMonthData(e),a=await this.getSheet(e);return await this.mergeSheetData(a,t),!0}}new Ia,a(762);function Na(){const[e,t]=Object(n.useState)(""),[a,i]=Object(n.useState)(!1),[r,s]=Object(n.useState)([]),[o,c]=Object(n.useState)(!1),[l,d]=Object(n.useState)(),[u,h]=Object(n.useState)(""),[p,g]=Object(n.useState)({date:"",amount:0,description:"",category:""}),b=Object(n.useCallback)(((e,a)=>{t(a),h(e)}),[]),j=(Object(n.useCallback)((async e=>{d(e),i(!0);const t=r.find((t=>t.id===e.id)),a=null===t||void 0===t?void 0:t.name,n=await Xt(a,e);i(!1),g(n),c(!0)}),[r]),Object(n.useCallback)((e=>{}),[])),m=Object(n.useCallback)(((e,t)=>{const a=t||(null===l||void 0===l?void 0:l.id);if(a&&null!==e&&void 0!==e&&e.date){const t=r.find((e=>e.id===a));a&&t&&Ce(a,t.name).then((()=>{if(Jt(s,u),e.isChequeIssued)Wt(e,a);else{const t=[Gt(e,a)];qt(t)}}))}d(void 0),c(!1)}),[r,l,u]);Object(n.useEffect)((()=>{Jt(s,u)}),[u]);const[O,v]=Object(n.useState)([]);Object(n.useEffect)((()=>{(async()=>{const e=new Ia,t=await e.getExpenseCategories();v(t)})()}),[]);const y=Object(n.useMemo)((()=>r.filter((e=>(e.mimeType.startsWith("image/")||"application/pdf"===e.mimeType)&&!e.name.startsWith(Ae)))),[r]),A=Object(n.useMemo)((()=>y.map((e=>({date:"",description:"",amount:0,category:"",isCash:!0,bill:e})))),[y]),S=Object(n.useMemo)((()=>r.filter((e=>"application/vnd.google-apps.folder"===e.mimeType))),[r]),f=Object(n.useMemo)((()=>u?`Unprocessed Bills - ${e}`:"Unprocessed Bills"),[e,u]);return Object(re.jsxs)("div",{className:"bill-workspace",children:[!!u&&Object(re.jsx)(ce.a,{onClick:()=>h(""),"aria-label":"Back",children:Object(re.jsx)(It.a,{})}),Object(re.jsx)("h3",{className:"inline-h3",children:f}),!u&&Object(re.jsx)(Ea,{folders:S,handleClick:b}),!!u&&Object(re.jsx)(va,{handleSubmit:m,transactions:A,expenseCategories:O,handleSplit:j}),!!l&&o&&Object(re.jsx)(Da,{...p,image:l.id,mimeType:l.mimeType,callback:m,handleClose:m,expenseCategories:O}),a&&Object(re.jsx)("div",{className:"overlay",children:Object(re.jsx)(Ot.a,{})})]})}var wa=a(424);a(763);var Ra=e=>{const[t,a]=Object(n.useState)(),i=Object(n.useCallback)((t=>{e.onUpload(t)}),[e]),r=Object(n.useCallback)((e=>{a(e)}),[]);return Object(re.jsxs)(re.Fragment,{children:[t&&Object(re.jsx)(o.a,{severity:"error",children:t}),Object(re.jsx)("p",{children:"Upload a transaction file (.csv or .xls) to process."}),Object(re.jsx)("div",{className:"file-upload-wrapper",children:Object(re.jsx)(wa.FilePicker,{extensions:["csv","xls","xlsx"],onChange:i,onError:r,children:Object(re.jsx)("button",{type:"button",children:"Upload"})})})]})},Ma=a(232),ka=a.n(Ma);const Ya="__EMPTY_",La="2",Ba="5",Pa="9",Ua="12",_a="17",Ha=["21","19","20","22"],Fa="TRAN DATE,",Ka="TRAN DATE",Ja="NARRATION",Wa="CHQ.NO.",qa="WITHDRAWAL(DR)",Va="DEPOSIT(CR)",Ga="BALANCE(INR)",za={parseCsvFile:e=>new Promise((t=>{const a=new FileReader;a.onload=e=>{const a=e.target.result.split(/\r?\n/),n=a.findIndex((e=>e.startsWith(Fa)));if(-1===n)throw new Error(`Header line starting with '${Fa}' not found.`);const i=a[n].split(","),r=[];for(let t=n+1;t<a.length;t+=1){const e=a[t].trim();if(e){const t=e.split(","),a={};i.forEach(((e,n)=>{e&&(a[e]=t[n]||"")})),r.push(a)}}t(za.parseCsvTransactions(r))},a.readAsBinaryString(e)})),parseXLS:e=>new Promise((t=>{const a=new FileReader;a.onload=e=>{const a=ka.a.read(e.target.result,{type:"binary"}),n=a.Sheets[a.SheetNames[0]],i=ka.a.utils.sheet_to_json(n),r=za.parseTransactions(i);t(r)},a.readAsBinaryString(e)})),parseAmount:e=>{let t;return t="string"===typeof e?parseFloat(e.replace("Cr","").replaceAll(",","")):e,t},getWorkingColumnKeyFromArray:(e,t)=>e.find((e=>!!t[`${Ya}${e}`])),parseCsvTransactions:e=>{let t=[];if(e.length){const a=Ka,n=e.filter((e=>e[a]&&10===e[a].length&&e[a].includes("/")&&"Invalid Date"!==M()(e[a],"dd/MM/YYYY").toDate().toString())),i=Ga,r=Ja,s=Wa;t=n.map((e=>{const t={Date:M()(e[a],"DD/MM/YYYY").toDate(),Description:e[r],"Cheque No":e[s]||"",Debit:0,Credit:0,Total:za.parseAmount(e[i]),type:"ONLINE"};return e[qa]&&(t.Debit=za.parseAmount(e[qa])),e[Va]&&(t.Credit=za.parseAmount(e[Va])),t}))}return t},parseTransactions:e=>{let t=[];if(e.length){const a=`${Ya}${La}`,n=e.filter((e=>e[a]&&10===e[a].length&&e[a].includes("/")&&"Invalid Date"!==M()(e[a],"dd/MM/YYYY").toDate().toString()));let i=za.getWorkingColumnKeyFromArray(Ha,n[0])||"";const r=`${Ya}${Ba}`,s=`${Ya}${Pa}`;i=`${Ya}${i}`,t=n.map((e=>{const t={Date:M()(e[a],"DD/MM/YYYY").toDate(),Description:e[r],"Cheque No":e[s]||"",Debit:0,Credit:0,Total:za.parseAmount(e[i]),type:"ONLINE"};return e[`${Ya}${Ua}`]&&(t.Debit=za.parseAmount(e[`${Ya}${Ua}`])),e[`${Ya}${_a}`]&&(t.Credit=za.parseAmount(e[`${Ya}${_a}`])),t}))}return t}};var Za=za;a(767);var Xa=e=>{const{xlsData:t,name:a}=e,i=Object(n.useMemo)((()=>{const e={};return t.forEach((t=>{const a=M()(t.Date).format("MMM-YY");e[a]=a})),e}),[t]),r=Object.values(i),[s,o]=Object(n.useState)(1===r.length?r[0]:""),{appData:c}=Object(n.useContext)(H);c.transSheetMonth=s;Object(n.useCallback)((e=>{e.target.value&&(c.transSheetMonth=e.target.value,o(e.target.value))}),[c]);let l=t;s&&(l=t.filter((e=>M()(e.Date).format("MMM-YY")===s)),c.transactions=l);Object(n.useCallback)((()=>{}),[]);return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("div",{className:"preview-header",children:Object(re.jsxs)("div",{children:["File: ",Object(re.jsx)("h4",{children:a})]})}),Object(re.jsx)(Nt.a,{className:"xls-file-preview",component:wt.a,children:Object(re.jsxs)(vt.a,{size:"small",stickyHeader:!0,"aria-label":"Parsed Bank Transactions",children:[Object(re.jsx)(yt.a,{children:Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{children:"#"}),Object(re.jsx)(St.a,{children:"Date"}),Object(re.jsx)(St.a,{children:"Description"}),Object(re.jsx)(St.a,{align:"right",children:"Cheque No."}),Object(re.jsx)(St.a,{align:"right",children:"Debit"}),Object(re.jsx)(St.a,{align:"right",children:"Credit"}),Object(re.jsx)(St.a,{align:"right",children:"Total"})]})}),Object(re.jsx)(ft.a,{children:l.map(((e,t)=>Object(re.jsxs)(At.a,{children:[Object(re.jsx)(St.a,{component:"th",scope:"row",children:t+1}),Object(re.jsx)(St.a,{component:"th",scope:"row",children:M()(e.Date).format("DD-MM-YYYY")}),Object(re.jsx)(St.a,{children:e.Description}),Object(re.jsx)(St.a,{align:"right",children:e["Cheque No"]}),Object(re.jsx)(St.a,{align:"right",children:e.Debit}),Object(re.jsx)(St.a,{align:"right",children:e.Credit}),Object(re.jsx)(St.a,{align:"right",children:e.Total})]},`${e.Date}-${e.Description}`)))})]})})]})};var $a=function(e){const{data:t}=e,[a,i]=Object(n.useState)("");Object(n.useEffect)((()=>{We.init()}),[]);const r=Object(n.useCallback)((async()=>{const e="Online Transactions";await We.getSheetByTitle(e)||await We.addSheet({headerValues:["Date","Description","Cheque No","Debit","Credit","Total","Category","Flat"],title:e});const a=JSON.parse(JSON.stringify(t)).map((e=>(e.Date=M()(e.Date).format("DD-MM-YYYY"),e)));await We.updateSheetWithJSON(a,e),i("Sheet Updated")}),[t]);return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("p",{children:a}),Object(re.jsx)("div",{className:"tools",children:Object(re.jsx)(ie.a,{variant:"outlined",onClick:r,children:"Save Sheet"})})]})};a(768);var Qa=()=>{const{sheetConfig:e}=Object(c.c)((e=>e.sheet)),[t,a]=Object(n.useState)(""),[i,r]=Object(n.useState)(0),[s,l]=Object(n.useState)(""),[d,u]=Object(n.useState)([]),h=Object(n.useCallback)((t=>{l(t.name);let n=Za.parseXLS;"text/csv"===t.type&&(n=Za.parseCsvFile),n(t).then((t=>{e.appData.transactions=t,t.reverse(),u(t),a(""),r(1)}))}),[e.appData]),p=Object(n.useCallback)((e=>{switch(e){case 0:return Object(re.jsx)(Ra,{onUpload:h});case 1:return Object(re.jsx)(Xa,{name:s,xlsData:d});case 2:return Object(re.jsx)($a,{data:d});default:return"Unknown step"}}),[d,h,s]),[g,b]=Object(n.useState)(new Set),j=["File Upload","File Preview","Save"],m=Object(n.useCallback)((e=>g.has(e)),[g]),O=Object(n.useCallback)((async()=>{let e=g;if(m(i)&&(e=new Set(e.values()),e.delete(i)),0===i)s?(r((e=>e+1)),a("")):a("Select a file.");else r((e=>e+1)),a("");b(e)}),[i,s,m,g]),v=Object(n.useCallback)((()=>{r(0)}),[]);return Object(re.jsxs)("div",{className:"wizard",children:[t&&Object(re.jsx)(o.a,{severity:"error",children:t}),Object(re.jsxs)("div",{children:[Object(re.jsx)(Ye.a,{activeStep:i,children:j.map(((e,t)=>{const a={},n={};return m(t)&&(a.completed=!1),Object(re.jsx)(Be.a,{...a,children:Object(re.jsx)(Pe.a,{...n,children:e})},e)}))}),Object(re.jsxs)("div",{children:[i===j.length&&Object(re.jsxs)("div",{children:[Object(re.jsx)(Le.a,{children:"All steps completed - you're finished"}),Object(re.jsx)(ie.a,{onClick:v,children:"Reset"})]}),i!==j.length&&Object(re.jsxs)("div",{children:[Object(re.jsx)(Le.a,{children:p(i)}),Object(re.jsxs)("div",{children:[Object(re.jsx)(ie.a,{disabled:0===i,onClick:()=>{r((e=>e-1))},children:"Back"}),!1,Object(re.jsx)(ie.a,{variant:"contained",color:"primary",onClick:O,children:i===j.length-1?"Save":"Next"})]})]})]})]})]})};var en=()=>Object(re.jsx)(Qa,{}),tn=a(903),an=a(904),nn=a(425),rn=a.n(nn);a(769);var sn=()=>{const[e,t]=Object(n.useState)(""),[a,i]=Object(n.useState)(""),[r,s]=Object(n.useState)(""),[o,c]=Object(n.useState)(""),l=Object(n.useCallback)((e=>{const a=e.target.value;t(a);const n=((e,t)=>w.a.AES.encrypt(e,null!==t&&void 0!==t?t:P.secret).toString())(a);var r,o;i(n),s((r=n,w.a.AES.decrypt(r,null!==o&&void 0!==o?o:P.secret).toString(w.a.enc.Utf8)))}),[]),d=Object(n.useCallback)((()=>{navigator.clipboard.writeText(a),c("Encrypted value copied to clipboard!"),setTimeout((()=>{c("")}),3e3)}),[a]),u=Object(n.useMemo)((()=>{let t=Object(re.jsx)(re.Fragment,{children:"Decrypted Value"});return e===r&&(t=Object(re.jsxs)(re.Fragment,{children:["Decrypted Value ",Object(re.jsx)(rn.a,{className:"encrypt-check"})," "]})),t}),[r,e]);return Object(re.jsxs)(tn.a,{maxWidth:"sm",children:[Object(re.jsx)(Le.a,{variant:"h4",gutterBottom:!0,children:"Key Encryption"}),Object(re.jsx)(ra.a,{label:"Enter Key",variant:"outlined",fullWidth:!0,margin:"normal",value:e,onChange:l}),a&&Object(re.jsxs)(an.a,{marginTop:"20px",children:[Object(re.jsx)(ra.a,{label:"Encrypted Value",variant:"outlined",fullWidth:!0,margin:"normal",value:a,InputProps:{readOnly:!0},onClick:d}),o&&Object(re.jsx)(Le.a,{variant:"body2",color:"primary",children:o})]}),r&&Object(re.jsx)(an.a,{marginTop:"20px",children:Object(re.jsx)(ra.a,{label:u,variant:"outlined",fullWidth:!0,margin:"normal",value:r,InputProps:{readOnly:!0}})})]})};var on=function(){return Object(re.jsx)(sn,{})},cn=a(902),ln=a(868);var dn=function(){const[e,t]=Object(n.useState)(""),[a,i]=Object(n.useState)(""),[r,s]=Object(n.useState)(!1);Object(n.useEffect)((()=>{var e,a;const n=null!==(e=window.OLLAMA_API_URL)&&void 0!==e?e:"",r=null!==(a=window.SECRET_KEY)&&void 0!==a?a:"";t(n),i(r)}),[]);const c=()=>s(!1);return Object(re.jsxs)(an.a,{maxWidth:600,sx:{p:2,mx:"auto",display:"flex",flexDirection:"column"},children:[Object(re.jsx)(Le.a,{variant:"h5",gutterBottom:!0,sx:{alignSelf:"flex-start"},children:"Settings"}),Object(re.jsx)(an.a,{width:"100%",children:Object(re.jsx)(cn.a,{spacing:2,children:Object(re.jsx)(ra.a,{label:"OLLAMA CHAT API URL",value:e,onChange:e=>{return a=e.target.value,t(a),window.OLLAMA_API_URL=a,s(!0),void setTimeout((()=>s(!1)),1500);var a},placeholder:"https://example.com",fullWidth:!0,variant:"outlined"})})}),Object(re.jsx)(ln.a,{open:r,autoHideDuration:1500,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(re.jsx)(o.a,{onClose:c,severity:"success",sx:{width:"100%"},children:"Settings saved to window object"})})]})};function un(){return Object(re.jsx)(dn,{})}var hn=function(){return Object(re.jsx)(oe.c,{children:Object(re.jsxs)(oe.a,{children:[Object(re.jsx)(oe.a,{path:"/",element:Object(re.jsx)(en,{})}),Object(re.jsx)(oe.a,{path:"/cat",element:Object(re.jsx)(Tt,{})}),Object(re.jsx)(oe.a,{path:"/bills",element:Object(re.jsx)(Na,{})}),Object(re.jsx)(oe.a,{path:"/cash",element:Object(re.jsx)(Me,{})}),Object(re.jsx)(oe.a,{path:"/gen-key",element:Object(re.jsx)(on,{})}),Object(re.jsx)(oe.a,{path:"/settings",element:Object(re.jsx)(un,{})})]})})};a(770);var pn=function(){const[e,t]=Object(n.useState)(""),[a,i]=Object(n.useState)(""),[r,l]=Object(n.useState)(!!U().secret);Object(n.useEffect)((()=>{if(a){k(a).res?(t(""),l(!0)):(t("Wrong secret. Enter it again."),i(""))}}),[a]);const[u,p]=Object(n.useState)(!1);return Object(re.jsx)(c.a,{store:X,children:Object(re.jsxs)(s.a,{children:[Object(re.jsxs)("header",{className:"app-header",children:[Object(re.jsx)("img",{src:"/images/ssfa.png",alt:"Suraksha Sunflower Apartment",width:"80px",height:"60px"}),Object(re.jsx)("span",{children:"Suraksha Sunflower "})]}),Object(re.jsxs)("div",{className:"app",children:[Object(re.jsxs)(f.c,{collapsed:u,children:[Object(re.jsxs)(f.a,{children:[Object(re.jsx)(f.b,{icon:Object(re.jsx)(j.a,{}),title:"Parse Online Transactions",children:Object(re.jsx)(s.b,{to:"/",children:"Parse Online Transactions"})}),Object(re.jsx)(f.b,{icon:Object(re.jsx)(g.a,{}),title:"Categorize Transactions",children:Object(re.jsx)(s.b,{to:"/cat",children:"Categorize Transactions"})}),Object(re.jsx)(f.b,{icon:Object(re.jsx)(S.a,{}),title:"Upload Bills",children:Object(re.jsx)(s.b,{to:"/bills",children:"Process Bills"})}),Object(re.jsx)(f.b,{icon:Object(re.jsx)(O.a,{}),title:"Generate Encrypted Keys",children:Object(re.jsx)(s.b,{to:"/gen-key",children:"Encrypt Keys"})}),Object(re.jsx)(f.b,{icon:Object(re.jsx)(y.a,{}),title:"Settings",children:Object(re.jsx)(s.b,{to:"/settings",children:"Settings"})})]}),Object(re.jsxs)("div",{className:"sb-footer",children:[!u&&Object(re.jsx)(d.a,{onClick:()=>p(!0)}),u&&Object(re.jsx)(h.a,{onClick:()=>p(!1)})]})]}),Object(re.jsxs)("div",{className:"workspace",children:[e&&Object(re.jsx)(o.a,{severity:"error",children:e}),!r&&Object(re.jsx)(se,{errorMsg:e,handleSecret:i}),r&&Object(re.jsx)(hn,{})]})]})]})})};a(771);const gn=document.getElementById("root");Object(r.createRoot)(gn).render(Object(re.jsx)(i.a.StrictMode,{children:Object(re.jsx)(pn,{})}));t.default={}}},[[772,1,2]]]);
//# sourceMappingURL=main.cafc543a.chunk.js.map