(this["webpackJsonpflat-maintenance"]=this["webpackJsonpflat-maintenance"]||[]).push([[0],{201:function(e,t){},357:function(e,t){},440:function(e,t){},442:function(e,t){},466:function(e,t){},494:function(e,t){},496:function(e,t){},525:function(e,t){},527:function(e,t){},528:function(e,t){},534:function(e,t){},536:function(e,t){},539:function(e,t){},541:function(e,t){},561:function(e,t){},577:function(e,t){},580:function(e,t){},627:function(e,t){},654:function(e,t,a){},707:function(e,t,a){},708:function(e,t,a){},712:function(e,t,a){},713:function(e,t,a){},714:function(e,t,a){},716:function(e,t){},717:function(e,t){},718:function(e,t,a){},719:function(e,t,a){},720:function(e,t,a){},721:function(e,t,a){},722:function(e,t,a){},723:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(359),s=a(81),c=a(813),o=a(41),l=a(391),p=a.n(l),d=a(392),h=a.n(d),u=a(387),j=a.n(u),g=a(386),b=a.n(g),O=a(389),v=a.n(O),m=a(390),S=a.n(m),A=a(388),y=a.n(A),C=a(82),f=a(110),x=a(363);let D=function(e){return e.LOAD_TRANS="LOAD_TRANS",e.LOAD_CASH_TRANS_SUCCESS="LOAD_CASH_TRANS_SUCCESS",e.LOAD_ONLINE_TRANS_SUCCESS="LOAD_ONLINE_TRANS_SUCCESS",e.LOAD_CASH_TRANS_FAILURE="LOAD_CASH_TRANS_FAILURE",e.LOAD_ONLINE_TRANS_FAILURE="LOAD_ONLINE_TRANS_FAILURE",e.UPDATE_MONTHLY_SPLIT="UPDATE_MONTHLY_SPLIT",e.RESET_MONTHLY_SPLIT="RESET_MONTHLY_SPLIT",e.UPDATE_MONTHLY_MAINT_SPLIT="UPDATE_MONTHLY_MAINT_SPLIT",e.RESET_MONTHLY_MAINT_SPLIT="RESET_MONTHLY_MAINT_SPLIT",e.RESET_TRANS="RESET_TRANS",e}({});const T={loading:!1,cashTransData:void 0,onlineTransData:void 0,monthlyCatSplit:void 0,error:""};var E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.LOAD_TRANS:return{...e,loading:!0};case D.LOAD_CASH_TRANS_SUCCESS:return{...e,loading:!1,cashTransData:t.payload,error:""};case D.LOAD_ONLINE_TRANS_SUCCESS:return{...e,loading:!1,onlineTransData:t.payload,error:""};case D.LOAD_CASH_TRANS_FAILURE:return{...e,loading:!1,cashTransData:void 0,error:t.payload};case D.LOAD_ONLINE_TRANS_FAILURE:return{...e,loading:!1,onlineTransData:void 0,error:t.payload};case D.UPDATE_MONTHLY_SPLIT:return{...e,monthlyCatSplit:t.payload,loading:!1};case D.RESET_MONTHLY_SPLIT:return{...e,monthlyCatSplit:void 0};case D.UPDATE_MONTHLY_MAINT_SPLIT:return{...e,monthlyMaintSplit:t.payload,loading:!1};case D.RESET_MONTHLY_MAINT_SPLIT:return{...e,monthlyMaintSplit:void 0};case D.RESET_TRANS:return T;default:return e}},M=a(362),N=a(37),I=a.n(N),R=a(24),k=a.n(R);const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={res:!1,error:""};if(e){const n=I.a.AES.decrypt(Y.ENC_CLIENT_EMAIL,e),r=I.a.AES.decrypt(Y.ENC_PRIVATE_KEY,e),i=I.a.AES.decrypt(Y.ENC_CHAT_GPT_KEY,e),s=I.a.AES.decrypt(Y.ENC_GOOGLE_API_KEY,e),c=I.a.AES.decrypt(Y.ENC_GEMINI_KEY,e),o=I.a.AES.decrypt(Y.OCR_SPACE_KEY,e);try{Y.clientEmail=n.toString(I.a.enc.Utf8),Y.privateKey=r.toString(I.a.enc.Utf8),Y.googleAPIKey=s.toString(I.a.enc.Utf8),Y.secret=e,Y.chatGPTPrivateKey=i.toString(I.a.enc.Utf8),Y.geminiKey=c.toString(I.a.enc.Utf8),Y.ocrSpaceKey=o.toString(I.a.enc.Utf8),sessionStorage.setItem("session-id",e),t.res=!0}catch(a){Y.secret="",t.res=!1,t.error="Invalid Secret Provided"}}else Y.secret="",t.res=!1,t.error="Empty Secret Set";return t},L=["001","002","003","004","005","007","008","009","010","011","012","101","102","103","104","105","106","107","108","109","110","111","112","201","202","203","204","205","206","207","208","209","210","211","212","301","302","303","304","305","306","307","308","309","310","311","312","401","402","403","404","405","406","407","408","409","410","411","412"],B={transCategories:[{key:"maintenance",label:"Maintenance",children:L.map((e=>({key:"maintenance-".concat(e),label:e})))},{key:"corpus",label:"Corpus Fund",children:L.map((e=>({key:"corpus-".concat(e),label:e})))},{key:"monthly",label:"Monthly Expenses",children:[]},{key:"others",label:"Others",children:[{key:"fine",label:"Fine"},{key:"extra",label:"Other Income"},{key:"account-transfer",label:"FD Deposit"},{key:"tenant-deposit",label:"Tenant Deposit"},{key:"rd-deposit",label:"Deposit to RD account"}]}],transactionFinYear:k()().format("YY"),transSheetMonth:"",transactions:[]},_="1aumDbLSTH31n1MFpguM0-THWslbR3ZPNCXSlI72WuBo",Y={secret:sessionStorage.getItem("session-id")||"",SPREADSHEET_ID:_,ENC_CLIENT_EMAIL:"U2FsdGVkX19lrOkAqkI1YRZkdHSjXZc+dtJNUzOhSlqaydB6Gxi4lm9MpS7+2/W7OtInfOCmh739buu1z1jzT/jJrAeRX2+hKkxc+3qsduw=",ENC_PRIVATE_KEY:"U2FsdGVkX1/i7T93uNMkvtV/hIYkButYpbgdWdXVf4ftrMUIjGc7OmaZRamJzAZNh3HKcvAW92t+mtWkIpJ2sLzLlB0BWWbBTZDPl+C/oD1YCcDZYCCPaHOcSvedvzBXLP3lGDi61mXPqPPGMDquh90g7oKvO8w+Oe6JIV8HQ9EYYB/rd/IRj34CP9K96NQDxcy06xsL2SfMMQuqSyBwRYYebogb4NZgpjfSKx6AJCvRnHkZMGBt2E0xtGm1UmS+XLq1Dlay8s2fJAYuF4yxSMjJpCzhOdTY0rhbTIQ8D3kZvJJU9+MCS4yqsVBCdqkWRqoQBBhHk8vSwb8ZTcomRUg4w6JDOu+HCT4vA6x5Jz8aSYu0CxZKndd4gHXy55YklnC728IKDavaEC13bNG/OrsBQL8P0IjzuomEAiQdFpdoQg81JmANZx1MbGD8NvdmuNEGzkTLPEssID5pO1AzGCepSeikWB8XXkJu+kHLGQe6SyBE7oxv5SDfeexWfkGOObo2Af9VbtZwg+jlVgKzf0lBj9NW0soC15VrpzV4t7oUpMT3Fe6d3oijHQ2hPxTYZMfuA8UsyO3WSTUbaxNWOpUbijJsDSUpENGQyr1XFSV4+3aN78prPt443BiaHAm8i50y9z2P7TJJteRrRE900MBm/9sMRK3fZb91VUJ9wsvmzRsJK7cxxBStx7T1k3wxQZCJisWXej+vqRlP0le95yB/2BikMV+nYyom4gQrySk8eW2rzvx26LS3LHf867SdpXSWzT7RBdIhxd6IXsK8B/fIjmR6zpeqMb/LUjRm4LcTn3UZgKEYDEFmgRGR07lsTP1czidqjCuOn+o9mZblzbsMFFAFzPhaj0ZKcO82vs3bHkDGIfoaN+EimD1ThwxlEehX08EOOKNLp19sxpUcwaxjbRgwunMh0o7J/H92TpsppRJJRfUEsI/ReI021yqkpiqRZcI/cEn3NykY1MualaqkuddoKqeD2LKjOmxaT26niNSsd/ffhjBD5f1DCWq84iXQaje6SIV1ZwesIUbUUG7MSTHI6Mf3LZuWIK/HQU/MhSYYtIHv7rvcJUyw0e/ZnUfKBRgyMYSLeTZI55MYPJ0HUGPJWIWnYMk8ESLBLnPnDknXo2m1i87Y37ui3Snqy7s6WW6nYlz1/HPexx/HQaQl5UsRGNre6+RREonqmL+B+AITWlN+bA4iLOnYfCg8OdyACDWBge3fwxduWWB4vtzlDNMx/Xqcb52BZAAh6d6Z7AE3t66ZfHv16VZnEEm14uV+zBgt41Mkfv0LNFZ6cqOjafwioFnMO9e3j738n2xwKMzcMzsdnhmHkyF7i7PLZqbTBp8P167/psPnfUV8vfcsmTombUUzOzViqJABfG6EczwhN19dd4lusGVDNrz43ywTA5zfU/jMcy1wk7i90rXo0HZSNNOuLGog2+qlx2xuyHORqdEVshb0BeJYckX95zjXLu6BuTO66vp4oIzecv9vprH3Jfx67mRvKKa+8xExXlY0BDM7vND5+EAZ0wz71MJonVjx/cXHqrSDxcnU1x5BJLAgZliQDZk/lAxBbUSuqvF21NBvZWGk2rDRKr5rTibBRDeOGoTQW1kRus87/YPBvThJ2OlFHkEAYskLyk8xPFTeC2XUJCEF7K6U3UpjL7LLWoCP+KcwazlItikvTzR44AAf2iFRf0+6wVQLZjpHZed0Z7KchTDyCm0ydVHuMAJjpogPjUbj26tbiICQ9SRtO+keG+JUHElkQzOe0bfsTuw8CqwPm6C1hNL9ReYYxrbwAwrZU8si4RWE1qSJ3cQXrxIOP275Uvsr5eUlgWYdJBrrYGUOjvQupB5CX9JL9SuH8Rfml2NzrMLWMM5mT9R1amUKLcl2ZyLkC4NDEmeqxPMtRtPLlQA/1aH939OdMbR5OZ9ozlSZFGiSS1eucvK44xvI4KCbFARx+urxXQgTSmZd/GwcFc5ZZXlojU8DTgQc5HTijP2x8iMptYYK/iPz2brWPs7LZsOiBaKCsbzWGdu/Lo3xJRqZoS5x7jGNl2q0JCj9/a0m7v+ODEZ6LaAQwsKX6M5iqNQ0YQWzlMClB6i1shbbrLsqtACXovqx9ACssZMVt7U9/WlDnmpjV+QT5Duhx8WBKehO2CeL2W9ZO8TtW+YDsV0mytvkXPwMl2RwMSAoNVau7b4CrU67z8BEVFcRKGHIURXxN/vithCvLR7Kk8+37cF16NOLBu1t6uixXH+0371xj74wJf7RFeeceyeZvGDrAsJ5qRvqD+vsAjl3EGUJySw1BJryedcR",ENC_GOOGLE_API_KEY:"U2FsdGVkX1+z10t9/VGkdh+xgB9JO7TwDIGpiW5ivAoQrmKV9c77947cJH49fTgzZcc5DSaLNH1jlCpIiLbSuw==",ENC_CHAT_GPT_KEY:"U2FsdGVkX19CE/c8Tng+qxPTykma92uBwnVA8hVNUPhl5desREv8awMfLxjN2ZnKC23rEB6XcYTSzVfgEwgEqQPZuhXq3Ef0cng56m8DqyI=",ENC_GEMINI_KEY:"U2FsdGVkX1+ja6BvyIZ4xRS/wHKtCFsD22qQ0wfw/U30gL6c2FfqhrQyqt25ch1C77vdq1A7rlLZ0RKBXXjmaQ==",OCR_SPACE_KEY:"U2FsdGVkX1/Je2pGMUWIY8Mnid+Xulw55FuCkiYcNvU=",doc:new M.GoogleSpreadsheet(_),appData:B},U=()=>Y;Y.secret&&w(Y.secret);const P=r.a.createContext(Y);var H=P,F=function(e){return e.INIT="INIT",e.INIT_SUCCESS="GET_SHEET_INFO",e.INIT_FAILURE="GET_SHEET_INFO_FAILURE",e.SET_SHEET_INFO="SET_SHEET_INFO",e}(F||{}),K=F;const J={initError:"",sheetConfig:U(),sheetInfo:new Map};var W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.INIT:return{...e,initializing:!0};case K.INIT_SUCCESS:return{...e,initializing:!1,appConfig:t.payload};case K.INIT_FAILURE:return{...e,initializing:!1,initError:t.payload};case K.SET_SHEET_INFO:return{...e,sheetInfo:t.payload};default:return e}};let G=function(e){return e.INIT="INIT",e.SUCCESS="SUCCESS",e.FAILURE="FAILURE",e.SET_CONFIG="SET_CONFIG",e.ADD_EVENTS="ADD_EVENTS",e}({});const V={isLoading:!1,data:{},config:{encBotId:"U2FsdGVkX1/0gDV/ibea6VfAgozs8tNyWPB0zt3iRLDsNORNjxOhmloQXZl7ywLjxeQl4Bmxe3iZ7RLdUxi+BA==",listURL:"https://state-tourniquet.000webhostapp.com/suraksha/telegram/get.php",fetchURL:"https://api.telegram.org/bot{{botId}}/getFile?file_id={{fileId}}",downloadURL:"https://api.telegram.org/file/bot{{botId}}/photos/{{filePath}}",updateURL:"https://state-tourniquet.000webhostapp.com/suraksha/telegram/processed.php?id={{recordId}}"},layoutData:void 0,events:[]};var q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.INIT:return{...e,isLoading:!0,layoutData:t.payload};case G.SUCCESS:return{...e,isLoading:!1,data:t.payload,error:void 0};case G.FAILURE:return{...e,isLoading:!1,data:void 0,error:t.payload};case G.SET_CONFIG:return{...e,config:t.payload};case G.ADD_EVENTS:return{...e,events:[...e.events,t.payload]};default:return e}};var z=Object(f.b)({sheet:W,trans:E,bills:q});const Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.c;var X=Object(f.d)(z,Z(Object(f.a)(x.a))),Q=a(801),$=a(806),ee=a(827),te=a(828),ae=a(829),ne=a(830),re=a(819),ie=a(1);function se(e){const[t,a]=r.a.useState(!0),[i,s]=r.a.useState(""),c=Object(n.useCallback)((()=>{e.handleSecret(i)}),[e,i]),o=Object(n.useCallback)((e=>{s(e.target.value)}),[]),l=Object(n.useCallback)((t=>{13===(t.keyCode?t.keyCode:t.which)&&e.handleSecret(i)}),[e,i]);return Object(ie.jsxs)(Q.a,{open:t,keepMounted:!0,"aria-labelledby":"Secret Key","aria-describedby":"Enter your secret key",children:[Object(ie.jsx)($.a,{id:"alert-dialog-slide-title",children:"Enter the secret key!!!"}),Object(ie.jsxs)(ee.a,{children:[Object(ie.jsx)(te.a,{id:"alert-dialog-slide-description",children:"Check with other committee members, if secret key is not known."}),Object(ie.jsx)(ae.a,{type:"password",value:i,onChange:o,onKeyPress:l}),Object(ie.jsx)("div",{className:"error",children:e.errorMsg})]}),Object(ie.jsx)(ne.a,{children:Object(ie.jsx)(re.a,{onClick:c,disabled:!i,color:"primary",children:"OK"})})]})}var ce=a(11),oe=a(831),le=a(375),pe=a.n(le),de=a(374),he=a.n(de),ue=(a(654),a(55)),je=a.n(ue),ge=a(370),be=a(372),Oe=a.n(be),ve=a(373);const me=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(Date.now()/1e3+3600);const{clientEmail:t,privateKey:a}=U(),n={iss:t,sub:"",aud:"https://www.googleapis.com/oauth2/v4/token",scope:"https://www.googleapis.com/auth/drive",exp:e,iat:Math.floor(Date.now()/1e3),jti:Object(ve.uuid)()};return Oe.a.sign(n,a||"",{algorithm:"RS256"})},Se=async()=>{const{clientEmail:e}=U(),t={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",client_id:e,assertion:await me()},a=await je.a.post("https://www.googleapis.com/oauth2/v4/token",t);if(200===a.status)return a.data.access_token;throw new Error(a.data)};const Ae="VERIFIED_",ye="1-6owJyxGQSwRKxcJyMI3NXY4v-APeBui";async function Ce(e){const{googleAPIKey:t}=U(),a=encodeURI("'".concat(e||ye,"' in parents and (mimeType = 'image/jpeg' or mimeType = 'image/png' or mimeType = 'application/pdf' or mimeType = 'application/vnd.google-apps.folder')"));try{const e=await je.a.get("https://www.googleapis.com/drive/v3/files?q=".concat(a,"&key=").concat(t)),{files:n}=e.data;return console.log("Fetched files:",n),n}catch(n){console.error("Error fetching files:",(null===n||void 0===n?void 0:n.message)||n)}return[]}const fe=async(e,t)=>{try{const a=await Se(),n=await je.a.patch("https://www.googleapis.com/drive/v3/files/".concat(e),{name:"".concat(Ae).concat(t)},{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(console.log("File moved successfully:",n.data),200===n.status)return n.data}catch(a){console.error("Error occurred while moving the file:",a)}return null};const xe=()=>U().ocrSpaceKey||"",De="https://api.ocr.space/parse/image";const Te=async e=>{const t=function(e){let t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);const a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length);for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([n],{type:a})}(e),a=new File([t],"canvasImage.jpg",{type:"image/jpeg"}),n=new FormData;n.append("base64Image",a);return await je.a.post(De,n,{headers:{"Content-Type":"multipart/form-data",apikey:xe()}})};var Ee=a(215);class Me{constructor(){if(this.chatGPTPrivateKey="",this.openAI=void 0,this.appConfig=void 0,this.appConfig=U(),this.appConfig.chatGPTPrivateKey){this.chatGPTPrivateKey=this.appConfig.chatGPTPrivateKey;const e=new Ee.Configuration({organization:"org-wfOq673LgvxydlfXwY3Fmcvm",apiKey:this.chatGPTPrivateKey});this.openAI=new Ee.OpenAIApi(e)}}async getCompleted(e){return this.openAI?this.openAI.createCompletion({model:"text-davinci-003",prompt:"Say this is a test",max_tokens:7,temperature:0,top_p:1,n:1,stream:!1,logprobs:null,stop:"\n"}):Promise.resolve("")}static getInstance(){return Me.instance||(Me.instance=new Me),Me.instance}}Me.instance=void 0;var Ne=Me;var Ie=function(){const e=Object(n.useRef)(),[t,a]=Object(n.useState)(),[r,i]=Object(n.useState)(!0),s=Object(n.useCallback)((()=>{const n=e.current||{};!t&&n&&n.takePhoto?(a(n.takePhoto()),i(!1)):a(void 0)}),[e,t]),c=Object(n.useCallback)((()=>{i((e=>!e))}),[]),o=r?"cash-trans block-page":"cash-trans",[l,p]=Object(n.useState)();return Object(n.useEffect)((()=>{t&&Te(t).then((async e=>{const{ParsedText:t}=e.data.ParsedResults[0]||{};if(t){const e=await Ne.getInstance().getCompleted(t);p(e)}}))}),[t]),Object(ie.jsxs)("div",{className:o,children:[Object(ie.jsx)("div",{children:"Handle Cash Transactions"}),Object(ie.jsx)("pre",{children:JSON.stringify(l,void 0,4)}),!t&&Object(ie.jsx)(oe.a,{className:"close-camera","aria-label":"Take Photo",onClick:c,children:r?Object(ie.jsx)(he.a,{}):Object(ie.jsx)(pe.a,{})}),Object(ie.jsx)(oe.a,{className:"camera-click","aria-label":"Take Photo",onClick:s,children:Object(ie.jsx)("img",{src:"/images/circular-camera.png",alt:"Take Pic"})})]})};var Re=()=>Object(ie.jsx)(Ie,{}),ke=a(126),we=a(820),Le=a(737),Be=a(838),_e=a(814);var Ye={"Audit Fees":1,BWSSB:2,Diesel:3,Bescom:4,"House Keeping Salary":5,Security:6,"Garden Maintenance":7,"Garbage Collection Vendor / BBMP":8,"Borewell And Motor Maintenance":9,"Annual Bonus":10,"Lift Maintenance":11,"HK Items Purchased":12,"Health Club Maintenance":13,"Electrical / Plumbing Repairs":14,"Apartment repairs related":15,"Apartment Safety":16,"CCTV / Intercomm":17,"Misc expenses":18,"Apartment developments":19,"Apartment Work By Security and Others":20,"Septic Tank Repairs / Cleaning":21,"Water Tanks Cleaning":22,"Generator Maintenance and Repair":23,"Savings Bank SMS Charges/Cheque book":24,"Festival/Holiday Celebration":25,"Drinking Water for Employees":26,"BAF Subscription Charges":27,"Maintenance Collection":30,"Income Tax Refund":31,"Other Income":32,"Interest on account":33,"Fine / Extra Payment Received":34,"Corpus Fund":35,"Tenant Deposit from the Owners":36,"FD Deposit":37,"Deposit to RD account":38};var Ue={Apr:2,May:3,Jun:4,Jul:5,Aug:6,Sep:7,Oct:8,Nov:9,Dec:10,Jan:11,Feb:12,Mar:13},Pe={"001":1,"002":2,"003":3,"004":4,"005":5,"007":6,"008":7,"009":8,"010":9,"011":10,"012":11,101:12,102:13,103:14,104:15,105:16,106:17,107:18,108:19,109:20,110:21,111:22,112:23,201:24,202:25,203:26,204:27,205:28,206:29,207:30,208:31,209:32,210:33,211:34,212:35,301:36,302:37,303:38,304:39,305:40,306:41,307:42,308:43,309:44,310:45,311:46,312:47,401:48,402:49,403:50,404:51,405:52,406:53,407:54,408:55,409:56,410:57,411:58,412:59};var He={Apr:2,May:3,Jun:4,Jul:5,Aug:6,Sep:7,Oct:8,Nov:9,Dec:10,Jan:11,Feb:12,Mar:13};let Fe;class Ke{constructor(){this.currentSheet="",this.initialized=!1,this.appConfig=void 0,this.appConfig=U()}init(){return this.initialized?Promise.resolve(this.appConfig.doc):new Promise(((e,t)=>{const{doc:a}=this.appConfig;a.useServiceAccountAuth({client_email:this.appConfig.clientEmail||"",private_key:this.appConfig.privateKey||""}).then((()=>{a.loadInfo().then((()=>{this.initialized=!0,e(a)})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e),t(e)}))}))}getSpreadSheet(){return this.appConfig.doc}async getSheetByTitleAsJson(e){const t=[],a=await this.getSheetByTitle(e);let n=a.headerValues,r=a.columnCount;if(!n||0===n.length){n=[];for(let e=0;e<r;e+=1){const{value:t}=a.getCell(0,e);t&&n.push(a.getCell(0,e).value.toString())}}r=n.length;const{rowCount:i}=a;for(let s=1;s<i;s+=1){const e={},i=[];for(let t=0;t<r;t+=1){const r=n[t],c=a.getCell(s,t).formattedValue;e[r]=c,i.push(c)}if(!i.some((e=>null!==e)))break;t.push(e)}return t}async getSheetByTitle(e){var t;const a=null===(t=this.appConfig.doc)||void 0===t?void 0:t.sheetsByTitle[e];return a&&(this.currentSheet=a.sheetId,await a.loadCells()),a}async getSheet(e){this.currentSheet=e;const t=this.appConfig.doc.sheetsById[e];return await t.loadCells(),t}appendSheet(e,t){return this.appConfig.doc.sheetsById[e].addRow(t)}append(e){return this.appConfig.doc.sheetsById[this.currentSheet||""].addRow(e)}async appendRows(e){const t=this.appConfig.doc.sheetsById[this.currentSheet||""];await t.addRows(e)}getSheetRow(e,t){return this.appConfig.doc.sheetsById[e].getRows({limit:1,offset:t})}getRow(e){return this.appConfig.doc.sheetsById[this.currentSheet||""].getRows({limit:1,offset:e})}getColumn(e){const t=this.appConfig.doc.sheetsById[this.currentSheet||""],a=[],n=t.rowCount<100?t.rowCount:100;for(let r=0;r<n-1;r+=1)a.push(t.getCell(r,e));return a}getColumnWithSheet(e,t){const a=[],n=e.rowCount<100?e.rowCount:100;for(let r=0;r<n-1;r+=1)a.push(e.getCell(r,t));return a}getSheetColumn(e,t){const a=this.appConfig.doc.sheetsById[e],n=[],r=a.rowCount<100?a.rowCount:100;for(let i=0;i<r-1;i+=1)n.push(a.getCell(i,t));return n}getSheetCell(e,t,a){return this.appConfig.doc.sheetsById[e].getCell(t,a)}getCell(e,t){return this.appConfig.doc.sheetsById[this.currentSheet||""].getCell(e,t)}saveSheetCells(e,t){return this.appConfig.doc.sheetsById[e].saveCells(t)}saveCells(e){return this.appConfig.doc.sheetsById[this.currentSheet||""].saveCells(e)}addSheet(e){return this.appConfig.doc.addSheet(e)}async saveSheetWithJSON(e){const t=this.appConfig.doc.sheetsById[this.currentSheet||""];await this.updateSheet(t,e)}async updateCategorySheet(e){const t=await this.getSheetByTitle("Summary");await t.loadCells();return Object.keys(e).forEach((a=>{const n=e[a],r=Object.keys(n),i=a.replace(/-\d+$/,""),s=Ue[i];r.forEach((e=>{const a=Ye[e];if("undefined"!==typeof a&&"undefined"!==typeof s){t.getCell(a,s).value=n[e]}}))})),t.saveUpdatedCells()}async udpateMaintenanceSheet(e){const t=await this.getSheetByTitle("Maintanence");await t.loadCells();return Object.keys(e).forEach((a=>{const n=e[a],r=Object.keys(Pe),i=a.replace(/-\d+$/,""),s=He[i];r.forEach((e=>{const a=Pe[e];if("undefined"!==typeof a&&"undefined"!==typeof s){t.getCell(a,s).value=n[e]}}))})),t.saveUpdatedCells()}async searchUpdateRecord(e,t,a,n){const r=await this.getSheetByTitle(e),i=await r.getRows(),s=i.findIndex((e=>Object.entries(t).every((t=>{let[a,n]=t;return e[a]===n}))));if(-1===s)throw console.log("Record not found."),new Error("RECORD_NOT_FOUND");{const e=i[s];e[a]?console.log("Record found but input column is not empty."):(e[a]=n,await e.save(),console.log("Record updated successfully."))}}isEmptySheet(e){return!e||0===e.rowCount}async updateSheet(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t&&t.length){const n=Object.keys(t[0]),r=n.length,i=a+t.length;for(let s=a;s<i;s+=1){const a=t[s];for(let t=0;t<r;t+=1){const r=e.getCell(s+1,t),i=a[n[t]];r.formattedValue!==i&&(r.value=i)}}}await e.saveUpdatedCells()}async updateSheetWithJSON(e,t){t&&await this.getSheetByTitle(t),await this.appendRows(e)}static getInstance(){return Fe||(Fe=new Ke,Fe.init()),Fe}}var Je=Ke.getInstance();const We=()=>({type:K.INIT}),Ge=e=>({type:K.INIT_SUCCESS,payload:e}),Ve=e=>({type:K.INIT_FAILURE,payload:e});let qe=function(e){return e.and="and",e.or="or",e.xor="xor",e.not="not",e.nand="nand",e.nor="nor",e}({});var ze=class{constructor(e){this.query=void 0,this.query=e}run(e){return Object.keys(this.query).every((t=>{const a=this.query[t];switch(t){case qe.or:return a.some((t=>e(t)));case qe.nor:return!a.some((t=>e(t)));case qe.xor:{const t=a.map((t=>e(t)));return t.some((e=>!0===e))&&t.some((e=>!1===e))}case qe.nand:case qe.not:return!a.every((t=>e(t)));case qe.and:default:return a.every((t=>e(t)))}}))}},Ze=a(127);const Xe=(e,t)=>t.split(/\s+/).some((t=>Object(Ze.a)(t.toString())===Object(Ze.a)(e))),Qe=(e,t)=>t.some((t=>Object(Ze.a)(t.toString())===Object(Ze.a)(e)));var $e=class{constructor(e){this.query=void 0,this.query=e}run(e){let t=!1;const{opr:a,value:n}=this.query;if(e&&n)switch(a){case"==":t=e.toString()===n.toString()||Xe(n.toString(),e.toString());break;case"!=":t=e.toString()!==n.toString();break;case">":t=e>n;break;case">=":t=e>=n;break;case"<":t=e<n;break;case"<=":t=e<=n;break;case"having":if("string"===typeof e)if(Array.isArray(n))t=n.some((t=>{const a=t.toString(),n=e.toLowerCase(),r=a.toLowerCase();return n.indexOf(r)>-1||Xe(r,n)}));else{const a=n.toString(),r=e.toLowerCase(),i=a.toLowerCase();t=r.indexOf(i)>-1||Xe(i,r)}break;case"regex":if(Array.isArray(n))t=n.some((t=>{var a;const n=t.toString(),r=new RegExp(n,"i");return(null===(a=e.match(r))||void 0===a?void 0:a.length)>0}));else{var r;const a=n.toString(),i=new RegExp(a,"i");t=(null===(r=e.match(i))||void 0===r?void 0:r.length)>0}break;case"in":Array.isArray(n)&&(t="string"===typeof n[0]?n.indexOf(e.toString())>-1||Qe(e.toString(),n):n.indexOf(e)>-1);break;case"range":Array.isArray(n)&&(t="undefined"===typeof n[0]||e>=n[0],t=t&&("undefined"===typeof n[1]||e<=n[1]))}return t}};class et{constructor(e){this.query=void 0,this.query=e}run(e){return Object.keys(this.query).every((t=>{const a=this.query[t];let n=!1;if(Array.isArray(a))n=a.every((a=>{const n=new $e(a),r=e[t];return n.run(r)}));else{n=new ze(a).run((a=>{const n=new $e(a),r=e[t];return n.run(r)}))}return n}))}}class tt{constructor(e){this.catFieldMap=void 0,this.catFieldMap=e}run(e){const t=Object.keys(this.catFieldMap);e.forEach((e=>{if(!e.Category){const a=t.find((t=>{const a=this.catFieldMap[t];let n;if(Array.isArray(a))n=a.every((t=>new et(t).run(e)));else{n=new ze(a).run((t=>new et(t).run(e)))}return n}));e.Category=a}}))}}var at={"Maintenance Collection":[{Credit:[{opr:"in",value:["3,200.00","3200","2,700.00","2700","2,800.00","2800","500.00","500","6,400.00","6400","9,600.00","9600","12,800.00","12800","19,000.00","19000"]}],Description:[{opr:"having",value:["maintenance","neft","upi","imps"]}]}],"Audit Fees":[{Description:[{opr:"having",value:["N YASWANTH","YASWANTH","audit","audit fees"]}]}],"Corpus Fund":[{Credit:[{opr:"in",value:["7500","7,500.00","15,000.00","15000","22,500.00","22500","30,000.00","30000","37,500.00","37500","45,000.00","45000"]}],Description:[{opr:"having",value:["corpus","neft","upi","imps"]}]}],"Income Tax Refund":[{Credit:[{opr:"in",value:["ACH","AY20","ACH Credit","AAKAS1985M"]}]}],Bescom:[{Description:[{opr:"having",value:["BESCOM","Electricity","EBANK:BBPS"]}]}],BWSSB:[{Debit:[{opr:"range",value:[14e3,16500]}],Description:[{opr:"having",value:["BANGALORE WATER SUPPLY","BWSSB","BANGALORE ONE","EBANK:BBPS"]}]}],"CCTV / Intercomm":[{Description:[{opr:"having",value:["SHANKAR TELECOM LINKS","Intercom"]}]}],Security:[{Debit:[{opr:"in",value:[35e3,35e3,41e3,41e3]}]}],"House Keeping Salary":[{Description:[{opr:"regex",value:["keeping","housekeeping","house keeping","Housekeeping.+Salary","House keeping.+Salary","house-keeping.+salary","housekeeping.+ladies","hk.+salary","hyrunni","sunanda"]}]}],"Garden Maintenance":[{Description:[{opr:"regex",value:["garden","gardner","Gardner.+Salary","garden.+work","Manure"]}]}],"Garbage Collection Vendor / BBMP":[{Description:[{opr:"having",value:["SYED ALI BASHA","RR CLEANING","RR CLEAN"]}]}],"Borewell And Motor Maintenance":[{Description:[{opr:"having",value:["borewell","motor","coil","winding"]}]}],"Lift Maintenance":[{Description:[{opr:"regex",value:["JOHNSON.+LIFTS","Lift"]}]}],"HK Items Purchased":[{Description:[{opr:"regex",value:["Housekeeping.+Items","Housekeeping.+Material","hk.+item","HK.+Material","bleaching","garbage drum","powder","mop","dust","dustbin","soap","detergent","broom","switch","tubelight","switch","light","bulb","Phenoyl","powder","phenoyl","sanitizer","cleaner","dettol","bottle","neem oil","tap","kerosene"]}]}],"Electrical / Plumbing Repairs":[{Description:[{opr:"having",value:["electric repair","electric work","electric","Chamundi","plumbing"]}]}],"Septic Tank Repairs / Cleaning":[{Description:[{opr:"having",value:["septik","septic","septic tank","sewage","sewage tank","sewage work","sewage pipe"]}]}],"Water Tanks Cleaning":[{Description:[{opr:"regex",value:["water.+tank","cauvery","kaveri"]}]}],"Generator Maintenance and Repair":[{Description:[{opr:"regex",value:["venus.+energy","kirloskar","generator"]}]}],"Savings Bank SMS Charges/Cheque book":[{Description:[{opr:"regex",value:["SMS .+Alert","cheque.+book","charges","chq.+book"]}]}],"Health Club Maintenance":[{Description:[{opr:"having",value:["gym","FITNESS","sports"]}]}],"Festival/Holiday Celebration":[{Description:[{opr:"regex",value:["diwali.+work","diwali","festival","celebration","pooja","pongal","independence","republic","sweets","flag"]}]}],"Drinking Water for Employees":[{Description:[{opr:"having",value:["drinking","drinking water","mineral water","water purchase"]}]}],Diesel:[{Description:[{opr:"regex",value:["Diesel"]}]}],"BAF Subscription Charges":[{Description:[{opr:"regex",value:["BAF","BAF Subscription"]}]}],"Annual Bonus":[{Description:[{opr:"regex",value:["bonus"]}]}],"Interest on account":[{Description:[{opr:"having",value:["89630100005613"]}]}],"FD Deposit":[{Description:[{opr:"having",value:["TO TRANSFER","Repayment Credit"]}]}],"Tenant Deposit from the Owners":[{Credit:[{opr:"in",value:["10,000.00","10000"]}]}],"Apartment Work By Security and Others":[{Description:[{opr:"regex",value:["Apartment.+Work","Cleaning.+Rain Water"]}]}],"Apartment Safety":[{Description:[{opr:"having",value:["sanitization","sanitizing","mask","sheild","shield","spray","cutting tree","fire","extinguisher","rat poison"]}]}],"Apartment developments":[{Description:[{opr:"having",value:["stationery","pen","paper","folder","files","notebook","note book","note-book","entry book","reciept book","bought","purchased","purchase of","cash voucher"]}]}],"Apartment repairs related":[{Description:[{opr:"having",value:["cement work","cement","service","repair","spanner","fixing","fixed"]}]}],"Misc expenses":[{Description:[{opr:"having",value:["tea","coffee"]}]}],"Fine / Extra Payment Received":[{Description:[{opr:"having",value:["maintenance","neft","upi","imps"]}],Credit:[{opr:"regex",value:["\\d"]}]}],"Other Income":[{Description:[{opr:"having",value:["income","other"]}],Credit:[{opr:">",value:0}]}],"Cash Withdrawal / in hand":{or:[{Description:[{opr:"regex",value:["cash","withdrawal","bank","basavaraj","carry.+forwarded","self"]}]},{"Cheque No":[{opr:"regex",value:["\\d+"]}]}]},"Deposit to RD account":[{Description:[{opr:"having",value:["3715125","SI:89630300010611"]}]}]},nt={"001":[{Description:[{opr:"having",value:["khadir","MOHAMEDABDULKHA"]}]}],"002":[{Description:[{opr:"having",value:["shainv","potti","MAHESH","NAGARAJ MUTHUSAMY","NAGARAJ"]}]}],"003":[{Description:[{opr:"having",value:["gulshan","padma","6364883334","subhrojyoti","6289470044"]}]}],"004":[{Description:[{opr:"having",value:["ANAND","ESHWARDAS"]}]}],"005":[{Description:[{opr:"having",value:["KOPRESH"]}]}],"007":[{Description:[{opr:"having",value:["007"]}]}],"008":[{Description:[{opr:"having",value:["NITHINS","/008","Repaka"]}]}],"009":[{Description:[{opr:"having",value:["rutvijkanzaria","PRATIK","9120182537"]}]}],"010":[{Description:[{opr:"having",value:["ANANTH","BHASKAR","PAKALAPATI"]}]}],"011":[{Description:[{opr:"having",value:["AKARSH"]}]}],"012":[{Description:[{opr:"having",value:["K B GANESH","GANESH","VIVEKNAYAK","VIVEK NAYAK"]}]}],101:[{Description:[{opr:"having",value:["VIJAYAKUMAR T","VIJAYAKUMAR"]}]}],102:[{Description:[{opr:"having",value:["ARNAB","CHAKRABORTY","ARNABCHAKRABORT"]}]}],103:[{Description:[{opr:"having",value:["KRISHNA KUMAR","KRISHNAKUMAR"]}]}],104:[{Description:[{opr:"having",value:["AMIT KUMAR","KARMAKAR","AMITKUMAR"]}]}],105:[{Description:[{opr:"having",value:["VIKASVERMA","VIKAS VERMA","MB105","105MAINTENA","8892757591"]}]}],106:[{Description:[{opr:"having",value:["mr.uttammohanty","uttam"]}]}],107:[{Description:[{opr:"having",value:["POLAKALA","NARAYANA PRASAD"]}]}],108:[{Description:[{opr:"having",value:["EMMANUEL RAJA A","EMMANUEL"]}]}],109:[{Description:[{opr:"having",value:["K S A RAJA RAM KUMAR","RAJARAMKUMAR"]}]}],110:[{Description:[{opr:"having",value:["SONYKUMARI","SONY KUMARI","PAVAN DEVARU","PAVANDEVARU","MOBLTA"]}]}],111:[{Description:[{opr:"having",value:["SENTHILKUMAR","SENTHIL"]}]}],112:[{Description:[{opr:"having",value:["ARINDAM"]}]}],201:[{Description:[{opr:"having",value:["ESWAR KRISHNAN","ESWAR","KARTHIKEYAN","flat201","ARIJIT"]}]}],202:[{Description:[{opr:"having",value:["SRIHARSHA","SRI HARSHA"]}]}],203:[{Description:[{opr:"having",value:["NILOTPALDAS"]}]}],204:[{Description:[{opr:"having",value:["AMLANJYOTI","AMLAN"]}]}],205:[{Description:[{opr:"having",value:["VIKRAMADITYA"]}]}],206:[{Description:[{opr:"having",value:["PINAKI","vishnupb619"]}]}],207:[{Description:[{opr:"having",value:["tr.1993@axisb","SRINIVAS","prashant.dombale"]}]}],208:[{Description:[{opr:"having",value:["JESUDOSS"]}]}],209:[{Description:[{opr:"having",value:["MULUKUTLA","AJU JAMES","AJUJAMES","T R RAJARAM","TRRAJARAM","CHALAPATHI"]}]}],210:[{Description:[{opr:"having",value:["TARANBIR","IMPSMBRSur"]}]}],211:[{Description:[{opr:"having",value:["9972528008","pranjan"]}]}],212:[{Description:[{opr:"having",value:["SURAJIT"]}]}],301:[{Description:[{opr:"having",value:["PRABUDH"]}]}],302:[{Description:[{opr:"having",value:["BALAJI"]}]}],303:[{Description:[{opr:"having",value:["SURENDRA"]}]}],304:[{Description:[{opr:"having",value:["MEHDI"]}]}],305:[{Description:[{opr:"having",value:["VIVIN"]}]}],306:[{Description:[{opr:"having",value:["ASHIM","DEBAJYOTI","MUTHIAH"]}]}],307:[{Description:[{opr:"having",value:["SAMPREETH","maddyrocks"]}]}],308:[{Description:[{opr:"having",value:["PRAHLAD"]}]}],309:[{Description:[{opr:"having",value:["7406849918","prasad.kiran","kbv018@okhdfcbank"]}]}],310:[{Description:[{opr:"having",value:["PREMA"]}]}],311:[{Description:[{opr:"having",value:["GURUPRASADA","CHOKKADI"]}]}],312:[{Description:[{opr:"having",value:["SHAKTHI","VINAYAK"]}]}],401:[{Description:[{opr:"having",value:["HARISHA"]}]}],402:[{Description:[{opr:"having",value:["JITHA","JITHAJAMES","JITHA JAMES"]}]}],403:[{Description:[{opr:"having",value:["8147758124","shaheer"]}]}],404:[{Description:[{opr:"having",value:["NOBROKER","/404Main","MOHAMMED SAIF"]}]}],405:[{Description:[{opr:"having",value:["SANTOSHKUMAR","/405main","SANTHOSH KUMAR","MALLA"]}]}],406:[{Description:[{opr:"having",value:["PRAVEENVIJAY","PRAVEEN VIJAY"]}]}],407:[{Description:[{opr:"having",value:["GALLA","VARADARAJU"]}]}],408:[{Description:[{opr:"having",value:["UDAY KIRAN","UDAY","YAGNAMURTHY"]}]}],409:[{Description:[{opr:"having",value:["PRABU","SUNDARRAJU","Jeevanantham"]}]}],410:[{Description:[{opr:"having",value:["rohinimh19","ROHINI","MALLIKARJUN"]}]}],411:[{Description:[{opr:"having",value:["NATESAN","ADITYA KOLLURI","ADITYAKOLLURI","santumahapatra","santu mahapatra"]}]}],412:[{Description:[{opr:"having",value:["CHIRANJAN"]}]}]};class rt{constructor(e){this.catFieldMap=void 0,this.catFieldMap=e}run(e){const t=Object.keys(this.catFieldMap);e.forEach((e=>{if(!e.Flat){const a=t.find((t=>{const a=this.catFieldMap[t];let n;if(Array.isArray(a))n=a.every((t=>new et(t).run(e)));else{n=new ze(a).run((t=>new et(t).run(e)))}return n}));e.Flat=a}}))}}let it=function(e){return e["Audit Fees"]="Audit Fees",e.BWSSB="BWSSB",e.Diesel="Diesel",e.Bescom="Bescom",e["House Keeping Salary"]="House Keeping Salary",e.Security="Security",e.Gardener="Gardener",e["Garbage Collection Vendor / BBMP"]="Garbage Collection Vendor / BBMP",e["Borewell And Motor Maintenance"]="Borewell And Motor Maintenance",e["Annual Bonus"]="Annual Bonus",e["Lift Maintenance"]="Lift Maintenance",e["HK Items Purchased"]="HK Items Purchased",e["Health Club Maintenance"]="Health Club Maintenance",e["Electrical / Plumbing Repairs"]="Electrical / Plumbing Repairs",e["Apartment repairs related"]="Apartment repairs related",e["Apartment Painting"]="Apartment Painting",e["CCTV / Intercomm"]="CCTV / Intercomm",e["Misc expenses"]="Misc expenses",e["Apartment developments"]="Apartment developments",e["Apartment Work By Security and Others"]="Apartment Work By Security and Others",e["Septic Tank Repairs / Cleaning"]="Septic Tank Repairs / Cleaning",e["Water Tanks Cleaning"]="Water Tanks Cleaning",e["Generator Maintenance and Repair"]="Generator Maintenance and Repair",e["Savings Bank SMS Charges/Cheque book"]="Savings Bank SMS Charges/Cheque book",e["Festival/Holiday Celebration"]="Festival/Holiday Celebration",e["Drinking Water for Employees"]="Drinking Water for Employees",e["BAF Subscription Charges"]="BAF Subscription Charges",e["Maintenance Collection"]="Maintenance Collection",e["Income Tax Refund"]="Income Tax Refund",e["Other Income"]="Other Income",e["Interest on account"]="Interest on account",e["Fine / Extra Payment Received"]="Fine / Extra Payment Received",e["Corpus Fund"]="Corpus Fund",e["Tenant Deposit from the Owners"]="Tenant Deposit from the Owners",e["FD Deposit"]="FD Deposit",e}({});const st=()=>({type:D.LOAD_TRANS}),ct=e=>({type:D.LOAD_CASH_TRANS_SUCCESS,payload:e}),ot=e=>({type:D.LOAD_ONLINE_TRANS_SUCCESS,payload:e}),lt=e=>({type:D.LOAD_CASH_TRANS_FAILURE,payload:e}),pt=e=>({type:D.LOAD_ONLINE_TRANS_FAILURE,payload:e}),dt=e=>({type:D.UPDATE_MONTHLY_SPLIT,payload:e}),ht=e=>({type:D.UPDATE_MONTHLY_MAINT_SPLIT,payload:e});function ut(e,t){return e.filter((e=>{if(e.Category){return e.Category.split(",").some((e=>{const[a]=e.split("(");return t.indexOf(a.trim())>-1}))}return!1}))}function jt(e,t){return a=>{a(st()),e.forEach((e=>{const a=e.Category,n=e.Date;if(a&&n){var r;const i=a.split(","),s=e.Debit&&"0"!==(null===(r=e.Debit)||void 0===r?void 0:r.toString());let c=s?parseFloat(e.Debit.toString().replace(/,/g,"")):parseFloat(e.Credit.toString().replace(/,/g,""));i.forEach((a=>{let r=a;if(a.indexOf("(")>-1){const e=a.split("(");[r]=e,c=parseFloat(e[1].replace(/(\(|\))/g,"").replace(/,/g,""))}!function(e,t,a,n,r,i){const s=a.replace(/\//g,"-"),c=k()(s,"DD-MM-YYYY").format("MMM-YY");e||(e={});e[c]||(e[c]={});r&&(i=-i);i&&"number"===typeof i?e[c][n]?e[c][n]+=i:e[c][n]=i:console.log("cat",n,c,t)}(t,e,n,r.trim(),!!s,c)}))}})),a(dt({...t}))}}var gt=a(832),bt=a(833),Ot=a(834),vt=a(835),mt=a(836),St=a(837);var At=function(){const e=Object(o.c)((e=>e.trans)),t=Object(o.b)();Object(n.useEffect)((()=>{t(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cash Transactions";return t=>{t(st()),Je.init().then((()=>{Je.getSheetByTitleAsJson(e).then((e=>{new tt(at).run(e),new rt(nt).run(ut(e,[it["Maintenance Collection"],it["Corpus Fund"]])),t(ct(e)),Je.saveSheetWithJSON(e)})).catch((e=>{t(lt(e.message))}))}))}}())}),[t]);const a=Object(n.useMemo)((()=>e.cashTransData),[e]),r=Object(n.useMemo)((()=>{let e=[];return a&&a.length>=1&&(e=Object.keys(a[0])),e}),[a]);return Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("div",{className:"cash-trans",children:[e.loading&&Object(ie.jsx)(gt.a,{}),!e.loading&&Object(ie.jsxs)(bt.a,{children:[Object(ie.jsx)(Ot.a,{children:Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{children:"Sl. No."}),r.map((e=>Object(ie.jsx)(mt.a,{children:e},e)))]})}),Object(ie.jsx)(St.a,{children:!!a&&a.map(((e,t)=>Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{children:t+1}),r.map((t=>Object(ie.jsx)(mt.a,{children:"Date"!==t?e[t]:k()(e[t],"DD/MM/YYYY").format("DD/MM/YYYY")},"".concat(t,"-").concat(e[t]))))]},JSON.stringify(e))))})]})]})})};var yt=function(){const e=Object(o.c)((e=>e.trans)),t=Object(o.b)();Object(n.useEffect)((()=>{t(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Online Transactions";return t=>{t(st()),Je.init().then((()=>{Je.getSheetByTitleAsJson(e).then((e=>{new tt(at).run(e),new rt(nt).run(ut(e,[it["Maintenance Collection"],it["Corpus Fund"]])),t(ot(e)),Je.saveSheetWithJSON(e)})).catch((e=>{t(pt(e.message))}))}))}}("Online Transactions"))}),[t]);const a=e.onlineTransData,r=Object(n.useMemo)((()=>{let e=[];return a&&a.length>1&&(e=Object.keys(a[0])),e}),[a]);return Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("div",{className:"online-trans",children:[e.loading&&Object(ie.jsx)(gt.a,{}),!e.loading&&Object(ie.jsxs)(bt.a,{children:[Object(ie.jsx)(Ot.a,{children:Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{children:"Sl. No."}),r.map((e=>Object(ie.jsx)(mt.a,{children:e},e)))]})}),Object(ie.jsx)(St.a,{children:!!a&&a.map(((e,t)=>Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{children:t+1}),r.map((t=>Object(ie.jsx)(mt.a,{children:"Date"!==t?e[t]:k()(e[t],"DD-MM-YYYY").format("DD/MM/YYYY")},"".concat(t,"-").concat(e[t]))))]},JSON.stringify(e))))})]})]})})};a(707);var Ct=function(){const[e,t]=Object(n.useState)(),[a,r]=Object(n.useState)("cash"),[i,s]=Object(n.useState)(""),l=Object(o.b)(),p=Object(o.c)((e=>e.sheet)),{initError:d}=p,h=Object(o.c)((e=>e.trans)),{monthlyCatSplit:u,cashTransData:j,onlineTransData:g,monthlyMaintSplit:b}=h;Object(n.useEffect)((()=>{i&&l(function(e){return t=>{t(We());const a=w(e);a.res?t(Ge({...U()})):t(Ve(a.error))}}(i))}),[l,i]);const O=Object(n.useCallback)((()=>{j&&g&&(l(jt([...j,...g],{})),r(void 0))}),[j,l,g]),v=Object(n.useCallback)((()=>{if(j&&g){const a=ut([...j,...g],[it["Maintenance Collection"]]);l((e=a,t={},a=>{a(st()),e.forEach((e=>{const a=e.Flat,n=e.Date,r=e.Category;if(a&&n&&r){const i=k()(n,"DD/MM/YYYY").format("MMM-YY");t||(t={}),t[i]||(t[i]={});let s=parseFloat(e.Credit.toString().replace(/,/g,""));if(r.indexOf("(")>-1){const e=r.match(/Maintenance Collection\s+\((\d+(\.\d+)?)\)/);e&&(s=parseFloat(e[1]))}s&&"number"===typeof s?t[i][a]?t[i][a]+=s:t[i][a]=s:console.log("Flat",a,i,e)}})),a(ht({...t}))})),r(void 0)}var e,t}),[j,l,g]),m=Object(n.useCallback)((()=>{Je.updateCategorySheet(u).then((()=>{console.log("Saved"),t("Summary Updated")}))}),[u]),S=Object(n.useCallback)((()=>{Je.udpateMaintenanceSheet(b).then((()=>{console.log("Saved"),t("Maintenence Split Updated")}))}),[b]),[A,y]=Object(n.useState)(0),C=Object(n.useMemo)((()=>["Cash Transactions","Online Transactions","Map Transactions","Categorize Maintenance"]),[]),f=Object(n.useCallback)((e=>!1),[]),x=Object(n.useCallback)((e=>!1),[]),D=Object(n.useCallback)((()=>{switch(A){case 3:r(void 0),y(2);break;case 2:r("online"),y(1);break;case 1:r("cash"),y(0)}}),[A]),T=Object(n.useCallback)((()=>{}),[]),E=Object(n.useCallback)((()=>{switch(A){case 0:r("online"),y(1);break;case 1:r(void 0),y(2),O();break;case 2:r(void 0),y(3),v()}}),[A,v,O]);return Object(ie.jsxs)("div",{children:[!!e&&Object(ie.jsx)(c.a,{severity:"info",children:e}),!!d&&Object(ie.jsx)(c.a,{severity:"error",children:d}),Object(ie.jsxs)("div",{className:"stepper-header",children:[Object(ie.jsx)(we.a,{className:"steps",activeStep:A,children:C.map(((e,t)=>{const a={},n={};return f(t)&&(n.optional=Object(ie.jsx)(Le.a,{variant:"caption",children:"Optional"})),x(t)&&(a.completed=!1),Object(ie.jsx)(Be.a,{...a,children:Object(ie.jsx)(_e.a,{...n,children:e})},e)}))}),Object(ie.jsxs)("div",{className:"nav",children:[Object(ie.jsx)(re.a,{disabled:0===A,onClick:D,children:"Back"}),f(A)&&Object(ie.jsx)(re.a,{variant:"contained",color:"primary",onClick:T,children:"Skip"}),Object(ie.jsx)(re.a,{variant:"contained",color:"primary",onClick:E,children:A===C.length-1?"Save":"Next"})]})]}),Object(ie.jsxs)("div",{className:"control",children:[2===A&&Object(ie.jsx)(re.a,{variant:"outlined",disabled:!u,onClick:m,children:"Save Categorized"}),"\xa0\xa0\xa0",3===A&&Object(ie.jsx)(re.a,{variant:"outlined",disabled:!b,onClick:S,children:"Save Split"})]}),!d&&!!p.sheetConfig.secret&&Object(ie.jsxs)(ie.Fragment,{children:[0===A&&Object(ie.jsx)(At,{}),1===A&&Object(ie.jsx)(yt,{}),2===A&&!!u&&Object(ie.jsx)(ke.a,{style:ke.b,data:u}),3===A&&!!b&&Object(ie.jsx)(ke.a,{style:ke.b,data:b})]})]})};var ft=()=>Object(ie.jsx)(Ct,{}),xt=a(383),Dt=a.n(xt),Tt=a(847),Et=a(396),Mt=a(842);let Nt=function(e){return e.Online="Online",e.Cash="Cash",e}({});function It(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t&&0!==t.length||(t=Object.values(it));let a="";const n=[],r=[];return e.split(/[\s_]/m).filter((e=>e&&"/"!==e)).forEach((e=>{/^\d{1,2}-\d{1,2}-\d{2,4}$/.test(e)&&n.push(e),/^\d+(\.\d{1,2})?-?$/.test(e)&&r.push(e)})),a||(a=e.replace(n[0],""),a=a.replace(r[0],"").replace(/_/g,""),a=function(e,t){const a=new Map;e.forEach((e=>{let n=0;const r=e.toLowerCase();t.forEach((e=>{r.includes(e.toLowerCase())&&(n+=1)})),a.set(e,n)}));const n=[...Array.from(a)].sort(((e,t)=>t[1]-e[1]));if(n.length>0&&0!==n[0][1])return n[0][0];return""}(t,[a])||a),{date:n[0],amount:parseFloat(r[0])||0,description:a}}var Rt=a(64);function kt(e){Ce(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").then((t=>{e(t)}))}const wt=async(e,t)=>{await async function(e,t,a,n){let r={Date:e,Debit:t,Category:a};try{await Je.searchUpdateRecord("Online Transactions",r,"Bill",n)}catch(i){r={Debit:t,Category:a},await Je.searchUpdateRecord("Online Transactions",r,"Bill",n)}}(e.date,e.amount,e.category||"",Bt(t))};const Lt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Cash Transactions";await Je.getSheetByTitle(t)||await Je.addSheet({headerValues:["Date","Description","Item Description/Purpose","Qty","Price","Debit","Credit","Total","Category","Flat","Bill"],title:t});const a=JSON.parse(JSON.stringify(e));return await Je.updateSheetWithJSON(a,t),!0},Bt=e=>"https://drive.google.com/file/d/".concat(e,"/preview"),_t=(e,t)=>{var a,n,r;const i={Date:null!==(a=e.date)&&void 0!==a?a:"",Description:null!==(n=e.description)&&void 0!==n?n:"",Debit:null!==(r=e.amount)&&void 0!==r?r:0,Credit:0,Category:e.category,Total:0};return t&&(i.Bill=Bt(t)),i},Yt=(e,t)=>{const a=_t(e);!a.Description&&t&&(a.Description=t);new tt(at).run([a]),e.category=a.Category,!e.description&&e.category&&(e.description=e.category)};function Ut(e,t){let a={};return new Promise((n=>{if(e&&e.indexOf("_")>-1&&(a=It(e)),a.amount&&a.date&&a.description){const e={...a};Yt(e),n(e)}else{const e="https://drive.usercontent.google.com/download?id=".concat(t.id);Pt(e).then((async e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.ParsedResults){var r,i;const t=(null===(r=e.data.ParsedResults[0])||void 0===r?void 0:r.ParsedText)||"",a=await async function(e){const t=U().geminiKey||"",a=new Rt.a(t).getGenerativeModel({model:"gemini-1.0-pro"}),n=[{category:Rt.c.HARM_CATEGORY_HARASSMENT,threshold:Rt.b.BLOCK_MEDIUM_AND_ABOVE},{category:Rt.c.HARM_CATEGORY_HATE_SPEECH,threshold:Rt.b.BLOCK_MEDIUM_AND_ABOVE},{category:Rt.c.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Rt.b.BLOCK_MEDIUM_AND_ABOVE},{category:Rt.c.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Rt.b.BLOCK_MEDIUM_AND_ABOVE}],r=a.startChat({generationConfig:{temperature:.9,topK:0,topP:1,maxOutputTokens:2048},safetySettings:n});try{const t=await r.sendMessage("What is the date (dd-mm-YYYY), amount (in number format), description (in short) and 'cash or cheque', extracted from the following text in JSON format?\n".concat(e)),{response:a}=t,n=a.text().replace(/```/g,"").replace(/JSON/gi,""),i=JSON.parse(n);return Array.isArray(i)?i[0]:i}catch(i){console.log(i)}return{amount:0,date:"",description:"","cash or cheque":null}}(t),s={...a,transactionType:"cheque"===(null===(i=a["cash or cheque"])||void 0===i?void 0:i.toLowerCase())?Nt.Online:Nt.Cash};Yt(s,t.toLowerCase()),n(s)}else{const e={...a};Yt(e),n(e)}}))}}))}const Pt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return new Promise(((a,n)=>{(e=>{const t=new FormData;return t.append("url",e),t.append("language","eng"),t.append("isTable","true"),t.append("OCREngine","5"),t.append("filetype",".Auto"),Object(ge.a)(je.a,{retries:3}),je.a.post(De,t,{headers:{"Content-Type":"multipart/form-data",apikey:xe()}}).catch((e=>{console.error(e)}))})(e).then((async n=>{if(t-=1,n||0===t)a(n);else if(!n){const n=await Pt(e,t);a(n)}}))}))};var Ht=a(809),Ft=a(376),Kt=a(846),Jt=a(839),Wt=a(812),Gt=a(817),Vt=a(845),qt=a(382),zt=a.n(qt),Zt=a(811),Xt=a(381),Qt=a.n(Xt);a(708);var $t=e=>{let{transaction:t,previewBill:a,expenseCategories:r}=e;console.log(t);const[i,s]=Object(n.useState)(!1),[c,o]=Object(n.useState)(t);Object(n.useEffect)((()=>{(async()=>{s(!0);const e=await Ut("",t.bill);o({...t,parsedFormData:e}),s(!1)})()}),[t]);const l=Object(n.useCallback)((()=>{}),[]);return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)(vt.a,{className:"bill-row",children:[Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(Ft.a,{dateAdapter:Ht.a,children:Object(ie.jsx)(Zt.a,{disabled:i,onChange:e=>console.log(e)})})}),Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(Jt.a,{disabled:i,value:c.description,onChange:e=>console.log(e.target.value),fullWidth:!0})}),Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(Jt.a,{type:"number",disabled:i,value:c.amount,onChange:e=>console.log(Number(e.target.value)),fullWidth:!0})}),Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(Wt.a,{className:"bill-category",fullWidth:!0,disabled:i,name:"category",value:c.category,onChange:l,children:r.map((e=>Object(ie.jsx)(Gt.a,{value:e.key,children:e.label},e.key)))})}),Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(Vt.a,{disabled:i,value:c.isCash})}),Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(oe.a,{disabled:i,onMouseEnter:e=>a(e,t.bill),children:Object(ie.jsx)(Qt.a,{})})}),Object(ie.jsx)(mt.a,{children:Object(ie.jsx)(oe.a,{disabled:i,"aria-label":"submit",onClick:()=>console.log("ss"),children:Object(ie.jsx)(zt.a,{})})})]},c.bill.id),i&&Object(ie.jsx)(vt.a,{className:"loader-row",children:Object(ie.jsx)(Kt.a,{color:"success"})})]})};var ea=e=>{let{transactions:t,expenseCategories:a}=e;const[n,i]=r.a.useState(null),[s,c]=r.a.useState(),o=(e,t)=>{c(t),i(e.currentTarget)},l=Boolean(n),p=l?"simple-popover":void 0;return Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)(Tt.a,{component:Et.a,children:[Object(ie.jsxs)(bt.a,{size:"small",children:[Object(ie.jsx)(Ot.a,{children:Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{children:"Date"}),Object(ie.jsx)(mt.a,{children:"Description"}),Object(ie.jsx)(mt.a,{children:"Amount"}),Object(ie.jsx)(mt.a,{children:"Category"}),Object(ie.jsx)(mt.a,{children:"Is Cash"}),Object(ie.jsx)(mt.a,{children:"Bill Preview"}),Object(ie.jsx)(mt.a,{children:"Action"})]})}),Object(ie.jsx)(St.a,{children:t.map((e=>Object(ie.jsx)($t,{previewBill:o,transaction:e,expenseCategories:a},e.bill.id)))})]}),!!s&&Object(ie.jsx)(Mt.b,{id:p,open:l,anchorEl:n,onClose:()=>{i(null),c(void 0)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(ie.jsx)("iframe",{className:"expense-bill-img",src:Bt(s.id),title:"Expense Bill"})})]})})},ta=a(841),aa=a(825),na=a(822),ra=a(815),ia=a(844),sa=a(821);a(712);var ca=e=>{let{callback:t,date:a,amount:r,description:i,category:s,image:c,handleClose:o,expenseCategories:l,mimeType:p,transactionType:d}=e;const[h,u]=Object(n.useState)({date:k()(null!==a&&void 0!==a?a:"01-04-2024","DD-MM-YYYY").format("YYYY-MM-DD"),amount:null!==r&&void 0!==r?r:0,description:null!==i&&void 0!==i?i:"text",category:null!==s&&void 0!==s?s:"",transactionType:d}),[j,g]=Object(n.useState)({date:"",amount:"",description:"",category:"",transactionType:""}),b=Object(n.useCallback)((e=>{const{name:t,value:a}=e.target;u((e=>({...e,[t]:a})))}),[]),O=Object(n.useCallback)((()=>{let e=!1;if(h.transactionType||(j.transactionType="Select a transaction type",e=!0),h.amount||(j.amount="Enter a valid amount",e=!0),h.date&&"invalid date"!==h.date.toLowerCase()||(j.date="Enter a valid date",e=!0),h.description||(j.description="Enter a valid description",e=!0),h.category||(j.category="Select a category",e=!0),e)g({...j});else{const e=JSON.parse(JSON.stringify(h));e.date=k()(e.date,"YYYY-MM-DD").format("DD-MM-YYYY"),t(e)}}),[t,j,h]);return Object(ie.jsx)("div",{className:"expense-dialog",children:Object(ie.jsxs)(Q.a,{open:!0,onClose:o,className:"bill-grid-dialog",fullWidth:!0,scroll:"paper",maxWidth:"xl",children:[Object(ie.jsx)($.a,{children:"Form"}),Object(ie.jsxs)(ee.a,{children:[p.startsWith("image/")&&Object(ie.jsx)("iframe",{className:"expense-bill-img",src:Bt(c),title:"Expense Bill"}),"application/pdf"===p&&Object(ie.jsx)("embed",{className:"expense-bill-img",src:Bt(c),title:"Expense Bill"}),Object(ie.jsxs)("form",{children:[Object(ie.jsxs)(ta.a,{variant:"outlined",fullWidth:!0,margin:"normal",error:!!j.transactionType,children:[Object(ie.jsxs)(aa.a,{"aria-label":"Transaction Type",name:"transactionType",value:h.transactionType,onChange:b,row:!0,children:[Object(ie.jsx)(na.a,{value:"Cash",control:Object(ie.jsx)(ra.a,{color:"primary"}),label:"Cash"}),Object(ie.jsx)(na.a,{value:"Online",control:Object(ie.jsx)(ra.a,{color:"primary"}),label:"Online"})]}),!!j.transactionType&&Object(ie.jsx)(ia.a,{children:j.transactionType})]}),Object(ie.jsx)(Jt.a,{type:"date",name:"date",label:"Date",value:h.date,onChange:b,fullWidth:!0,margin:"normal",variant:"outlined",placeholder:"DD-MM-YYYY",error:!!j.date,helperText:j.date}),Object(ie.jsx)(Jt.a,{type:"number",name:"amount",label:"Amount",value:h.amount,onChange:b,fullWidth:!0,margin:"normal",variant:"outlined",error:!!j.amount,helperText:j.amount}),Object(ie.jsx)(Jt.a,{type:"text",name:"description",label:"Description",value:h.description,onChange:b,fullWidth:!0,margin:"normal",variant:"outlined",error:!!j.description,helperText:j.description}),Object(ie.jsxs)(ta.a,{variant:"outlined",fullWidth:!0,margin:"normal",error:!!j.category,children:[Object(ie.jsx)(sa.a,{children:"Category"}),Object(ie.jsx)(Wt.a,{name:"category",value:h.category,onChange:b,label:"Category",children:l.map((e=>Object(ie.jsx)(Gt.a,{value:e.key,children:e.label},e.key)))}),!!j.category&&Object(ie.jsx)(ia.a,{children:j.category})]})]})]}),Object(ie.jsxs)(ne.a,{children:[Object(ie.jsx)(re.a,{onClick:()=>o(),color:"primary",children:"Cancel"}),Object(ie.jsx)(re.a,{onClick:O,color:"primary",children:"Submit"})]})]})})},oa=a(823);var la=e=>{let{folders:t,handleClick:a}=e;const n=t.length?function(e){const t={APR:1,MAY:2,JUN:3,JUL:4,AUG:5,SEP:6,OCT:7,NOV:8,DEC:9,JAN:10,FEB:11,MAR:12};return e.sort(((e,a)=>t[e.name.toUpperCase()]-t[a.name.toUpperCase()])),e}(t):[];return Object(ie.jsx)("div",{children:Object(ie.jsx)(oa.a,{container:!0,spacing:2,children:n.map(((e,t)=>Object(ie.jsxs)(oa.a,{item:!0,xs:2,onClick:()=>a(e.id),children:[Object(ie.jsx)("img",{src:"/images/folder.jpg",id:"folder-".concat(e.name),alt:"Folder ".concat(t+1),style:{width:200,height:200,cursor:"pointer",padding:"5px"}}),Object(ie.jsx)("h3",{style:{textAlign:"center"},children:e.name})]},"Image ".concat(t+1))))})})};class pa{constructor(){this.initProm=void 0,this.sheetIntialized=!1,this.sheets=new Map,this.initProm=Je.init(),this.initProm.then((()=>{this.sheetIntialized=!0}))}async getSheet(e){return this.sheetIntialized||await this.initProm,new Promise(((t,a)=>{this.sheets.has(e)?t(this.sheets.get(e)):Je.getSheetByTitle(e).then((n=>{n?(this.sheets.set(e,n),t(n)):a()}))}))}async getExpenseCategories(){return new Promise(((e,t)=>{let a=[];this.getSheet("Summary").then((t=>{const n=Je.getColumnWithSheet(t,0).map((e=>e.value)),r=[];for(let e=1;e<n.length-1&&"Total Expense"!==n[e];e+=1)r.push(n[e]),a=r.map((e=>({key:e,label:e})));e(a)}))}))}async parseMonthlySheet(e){return(await e.getRows()).map((e=>({Date:k()(e.Date,"DD/MM/YYYY").toDate(),Description:e.Desc,"Cheque No":e.ChqNo,Debit:parseFloat(e.Amount)<0?parseFloat(e.Amount):0,Credit:parseFloat(e.Amount)>=0?parseFloat(e.Amount):0,Total:parseFloat(e.Balance),type:e.Type})))}getMonthData(e){return new Promise(((t,a)=>{this.getSheet(e).then((async e=>{const a=await this.parseMonthlySheet(e);t(a)})).catch((()=>{Je.addSheet({headerValues:["Date","Desc","ChqNo","Amount","Type","Balance"],title:e}).then((a=>{this.sheets.set(e,a),t([])}))}))}))}pushSheetData(e,t){t.push({Date:k()(e.Date).format("DD-MM-YYYY"),Desc:e.Description,Balance:e.Total,Amount:e.Credit-e.Debit,ChqNo:e["Cheque No"],Type:e.type})}transCompare(e,t){return k()(e.Date).format("DD/MM/YYY")===k()(t.Date).format("DD/MM/YYY")&&e.Description===t.Description&&e.Debit===t.Debit&&e.Credit===t.Credit&&e.type===t.type}async mergeSheetData(e,t){const{transactions:a}=U().appData,n=[];return t.length>0?(a.forEach((e=>{-1===t.findIndex((t=>this.transCompare(t,e)))&&this.pushSheetData(e,n)})),t.forEach((e=>{-1===a.findIndex((t=>this.transCompare(t,e)))&&a.push(e)}))):a.forEach((e=>this.pushSheetData(e,n))),n.length&&await e.addRows(n),!0}async setMonthData(e){const t=await this.getMonthData(e),a=await this.getSheet(e);return await this.mergeSheetData(a,t),!0}}new pa,a(713);function da(){const[e,t]=Object(n.useState)(!1),[a,r]=Object(n.useState)([]),[i,s]=Object(n.useState)(!1),[c,o]=Object(n.useState)(),[l,p]=Object(n.useState)(""),[d,h]=Object(n.useState)({date:"",amount:0,description:"",category:""}),u=Object(n.useCallback)((e=>{p(e)}),[]),j=(Object(n.useCallback)((async e=>{o(e),t(!0);const n=a.find((t=>t.id===e.id)),r=null===n||void 0===n?void 0:n.name,i=await Ut(r,e);t(!1),h(i),s(!0)}),[a]),Object(n.useCallback)((e=>{if(c&&null!==e&&void 0!==e&&e.date){const t=a.find((e=>e.id===c.id));c&&t&&fe(c.id,t.name).then((()=>{if(kt(r,l),e.transactionType===Nt.Cash){const t=[_t(e,c.id)];Lt(t)}else wt(e,c.id)}))}o(void 0),s(!1)}),[a,c,l]));Object(n.useEffect)((()=>{kt(r,l)}),[l]);const[g,b]=Object(n.useState)([]);Object(n.useEffect)((()=>{(async()=>{const e=new pa,t=await e.getExpenseCategories();b(t)})()}),[]);const O=Object(n.useMemo)((()=>a.filter((e=>(e.mimeType.startsWith("image/")||"application/pdf"===e.mimeType)&&!e.name.startsWith(Ae)))),[a]),v=Object(n.useMemo)((()=>O.map((e=>({date:"",description:"",amount:0,category:"",isCash:!0,bill:e})))),[O]),m=Object(n.useMemo)((()=>a.filter((e=>"application/vnd.google-apps.folder"===e.mimeType))),[a]);return Object(ie.jsxs)("div",{className:"bill-workspace",children:[!!l&&Object(ie.jsx)(oe.a,{onClick:()=>p(""),"aria-label":"Back",children:Object(ie.jsx)(Dt.a,{})}),Object(ie.jsx)("h3",{className:"inline-h3",children:"Unprocessed Bills"}),!l&&Object(ie.jsx)(la,{folders:m,handleClick:u}),!!l&&Object(ie.jsx)(ea,{transactions:v,expenseCategories:g}),!!c&&i&&Object(ie.jsx)(ca,{...d,image:c.id,mimeType:c.mimeType,callback:j,handleClose:j,expenseCategories:g}),e&&Object(ie.jsx)("div",{className:"overlay",children:Object(ie.jsx)(gt.a,{})})]})}var ha=a(384);a(714);var ua=e=>{const[t,a]=Object(n.useState)(),r=Object(n.useCallback)((t=>{e.onUpload(t)}),[e]),i=Object(n.useCallback)((e=>{a(e)}),[]);return Object(ie.jsxs)(ie.Fragment,{children:[t&&Object(ie.jsx)(c.a,{severity:"error",children:t}),Object(ie.jsx)("p",{children:"Upload a transaction file (.xls) to process."}),Object(ie.jsx)("div",{className:"file-upload-wrapper",children:Object(ie.jsx)(ha.FilePicker,{extensions:["xls","xlsx"],onChange:r,onError:i,children:Object(ie.jsx)("button",{type:"button",children:"Upload"})})})]})},ja=a(216),ga=a.n(ja);const ba="__EMPTY_",Oa="2",va="5",ma="9",Sa="12",Aa="17",ya=["21","19","20","22"],Ca={parseXLS:e=>new Promise((t=>{const a=new FileReader;a.onload=e=>{const a=ga.a.read(e.target.result,{type:"binary"}),n=a.Sheets[a.SheetNames[0]],r=ga.a.utils.sheet_to_json(n),i=Ca.parseTransactions(r);t(i)},a.readAsBinaryString(e)})),parseAmount:e=>{let t;return t="string"===typeof e?parseFloat(e.replace("Cr","").replaceAll(",","")):e,t},getWorkingColumnKeyFromArray:(e,t)=>e.find((e=>!!t["".concat(ba).concat(e)])),parseTransactions:e=>{let t=[];if(e.length){const a="".concat(ba).concat(Oa),n=e.filter((e=>e[a]&&10===e[a].length&&e[a].includes("/")&&"Invalid Date"!==k()(e[a],"dd/MM/YYYY").toDate().toString()));let r=Ca.getWorkingColumnKeyFromArray(ya,n[0])||"";const i="".concat(ba).concat(va),s="".concat(ba).concat(ma);r="".concat(ba).concat(r),t=n.map((e=>{const t={Date:k()(e[a],"DD/MM/YYYY").toDate(),Description:e[i],"Cheque No":e[s]||"",Debit:0,Credit:0,Total:Ca.parseAmount(e[r]),type:"ONLINE"};return e["".concat(ba).concat(Sa)]&&(t.Debit=Ca.parseAmount(e["".concat(ba).concat(Sa)])),e["".concat(ba).concat(Aa)]&&(t.Credit=Ca.parseAmount(e["".concat(ba).concat(Aa)])),t}))}return t}};var fa=Ca;a(718);var xa=e=>{const{xlsData:t,name:a}=e,r=Object(n.useMemo)((()=>{const e={};return t.forEach((t=>{const a=k()(t.Date).format("MMM-YY");e[a]=a})),e}),[t]),i=Object.values(r),[s,c]=Object(n.useState)(1===i.length?i[0]:""),{appData:o}=Object(n.useContext)(H);o.transSheetMonth=s;Object(n.useCallback)((e=>{e.target.value&&(o.transSheetMonth=e.target.value,c(e.target.value))}),[o]);let l=t;s&&(l=t.filter((e=>k()(e.Date).format("MMM-YY")===s)),o.transactions=l);Object(n.useCallback)((()=>{}),[]);return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"preview-header",children:Object(ie.jsxs)("div",{children:["File: ",Object(ie.jsx)("h4",{children:a})]})}),Object(ie.jsx)(Tt.a,{className:"xls-file-preview",component:Et.a,children:Object(ie.jsxs)(bt.a,{size:"small",stickyHeader:!0,"aria-label":"Parsed Bank Transactions",children:[Object(ie.jsx)(Ot.a,{children:Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{children:"#"}),Object(ie.jsx)(mt.a,{children:"Date"}),Object(ie.jsx)(mt.a,{children:"Description"}),Object(ie.jsx)(mt.a,{align:"right",children:"Cheque No."}),Object(ie.jsx)(mt.a,{align:"right",children:"Debit"}),Object(ie.jsx)(mt.a,{align:"right",children:"Credit"}),Object(ie.jsx)(mt.a,{align:"right",children:"Total"})]})}),Object(ie.jsx)(St.a,{children:l.map(((e,t)=>Object(ie.jsxs)(vt.a,{children:[Object(ie.jsx)(mt.a,{component:"th",scope:"row",children:t+1}),Object(ie.jsx)(mt.a,{component:"th",scope:"row",children:k()(e.Date).format("DD-MM-YYYY")}),Object(ie.jsx)(mt.a,{children:e.Description}),Object(ie.jsx)(mt.a,{align:"right",children:e["Cheque No"]}),Object(ie.jsx)(mt.a,{align:"right",children:e.Debit}),Object(ie.jsx)(mt.a,{align:"right",children:e.Credit}),Object(ie.jsx)(mt.a,{align:"right",children:e.Total})]},e.Description)))})]})})]})};var Da=function(e){const{data:t}=e,[a,r]=Object(n.useState)("");Object(n.useEffect)((()=>{Je.init()}),[]);const i=Object(n.useCallback)((async()=>{const e="Online Transactions";await Je.getSheetByTitle(e)||await Je.addSheet({headerValues:["Date","Description","Cheque No","Debit","Credit","Total","Category","Flat"],title:e});const a=JSON.parse(JSON.stringify(t)).map((e=>(e.Date=k()(e.Date).format("DD-MM-YYYY"),e)));await Je.updateSheetWithJSON(a,e),r("Sheet Updated")}),[t]);return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("p",{children:a}),Object(ie.jsx)("div",{className:"tools",children:Object(ie.jsx)(re.a,{variant:"outlined",onClick:i,children:"Save Sheet"})})]})};a(719);var Ta=()=>{const{sheetConfig:e}=Object(o.c)((e=>e.sheet)),[t,a]=Object(n.useState)(""),[r,i]=Object(n.useState)(0),[s,l]=Object(n.useState)(""),[p,d]=Object(n.useState)([]),h=Object(n.useCallback)((t=>{l(t.name),fa.parseXLS(t).then((t=>{e.appData.transactions=t,t.reverse(),d(t),a(""),i(1)}))}),[e.appData]),u=Object(n.useCallback)((e=>{switch(e){case 0:return Object(ie.jsx)(ua,{onUpload:h});case 1:return Object(ie.jsx)(xa,{name:s,xlsData:p});case 2:return Object(ie.jsx)(Da,{data:p});default:return"Unknown step"}}),[p,h,s]),[j,g]=Object(n.useState)(new Set),b=["File Upload","File Preview","Save"],O=Object(n.useCallback)((e=>j.has(e)),[j]),v=Object(n.useCallback)((async()=>{let e=j;if(O(r)&&(e=new Set(e.values()),e.delete(r)),0===r)s?(i((e=>e+1)),a("")):a("Select a file.");else i((e=>e+1)),a("");g(e)}),[r,s,O,j]),m=Object(n.useCallback)((()=>{i(0)}),[]);return Object(ie.jsxs)("div",{className:"wizard",children:[t&&Object(ie.jsx)(c.a,{severity:"error",children:t}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)(we.a,{activeStep:r,children:b.map(((e,t)=>{const a={},n={};return O(t)&&(a.completed=!1),Object(ie.jsx)(Be.a,{...a,children:Object(ie.jsx)(_e.a,{...n,children:e})},e)}))}),Object(ie.jsxs)("div",{children:[r===b.length&&Object(ie.jsxs)("div",{children:[Object(ie.jsx)(Le.a,{children:"All steps completed - you're finished"}),Object(ie.jsx)(re.a,{onClick:m,children:"Reset"})]}),r!==b.length&&Object(ie.jsxs)("div",{children:[Object(ie.jsx)(Le.a,{children:u(r)}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)(re.a,{disabled:0===r,onClick:()=>{i((e=>e-1))},children:"Back"}),!1,Object(ie.jsx)(re.a,{variant:"contained",color:"primary",onClick:v,children:r===b.length-1?"Save":"Next"})]})]})]})]})]})};var Ea=()=>Object(ie.jsx)(Ta,{}),Ma=a(848),Na=a(849),Ia=a(385),Ra=a.n(Ia);a(720);var ka=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[i,s]=Object(n.useState)(""),[c,o]=Object(n.useState)(""),l=Object(n.useCallback)((e=>{const a=e.target.value;t(a);const n=((e,t)=>I.a.AES.encrypt(e,null!==t&&void 0!==t?t:Y.secret).toString())(a);var i,c;r(n),s((i=n,I.a.AES.decrypt(i,null!==c&&void 0!==c?c:Y.secret).toString(I.a.enc.Utf8)))}),[]),p=Object(n.useCallback)((()=>{navigator.clipboard.writeText(a),o("Encrypted value copied to clipboard!"),setTimeout((()=>{o("")}),3e3)}),[a]),d=Object(n.useMemo)((()=>{let t=Object(ie.jsx)(ie.Fragment,{children:"Decrypted Value"});return e===i&&(t=Object(ie.jsxs)(ie.Fragment,{children:["Decrypted Value ",Object(ie.jsx)(Ra.a,{className:"encrypt-check"})," "]})),t}),[i,e]);return Object(ie.jsxs)(Ma.a,{maxWidth:"sm",children:[Object(ie.jsx)(Le.a,{variant:"h4",gutterBottom:!0,children:"Key Encryption"}),Object(ie.jsx)(Jt.a,{label:"Enter Key",variant:"outlined",fullWidth:!0,margin:"normal",value:e,onChange:l}),a&&Object(ie.jsxs)(Na.a,{marginTop:"20px",children:[Object(ie.jsx)(Jt.a,{label:"Encrypted Value",variant:"outlined",fullWidth:!0,margin:"normal",value:a,InputProps:{readOnly:!0},onClick:p}),c&&Object(ie.jsx)(Le.a,{variant:"body2",color:"primary",children:c})]}),i&&Object(ie.jsx)(Na.a,{marginTop:"20px",children:Object(ie.jsx)(Jt.a,{label:d,variant:"outlined",fullWidth:!0,margin:"normal",value:i,InputProps:{readOnly:!0}})})]})};var wa=function(){return Object(ie.jsx)(ka,{})};var La=function(){return Object(ie.jsx)(ce.c,{children:Object(ie.jsxs)(ce.a,{children:[Object(ie.jsx)(ce.a,{path:"/",element:Object(ie.jsx)(Ea,{})}),Object(ie.jsx)(ce.a,{path:"/cat",element:Object(ie.jsx)(ft,{})}),Object(ie.jsx)(ce.a,{path:"/bills",element:Object(ie.jsx)(da,{})}),Object(ie.jsx)(ce.a,{path:"/cash",element:Object(ie.jsx)(Re,{})}),Object(ie.jsx)(ce.a,{path:"/gen-key",element:Object(ie.jsx)(wa,{})})]})})};a(721);var Ba=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[i,l]=Object(n.useState)(!!U().secret);Object(n.useEffect)((()=>{if(a){w(a).res?(t(""),l(!0)):(t("Wrong secret. Enter it again."),r(""))}}),[a]);const[d,u]=Object(n.useState)(!1);return Object(ie.jsx)(o.a,{store:X,children:Object(ie.jsxs)(s.a,{children:[Object(ie.jsxs)("header",{className:"app-header",children:[Object(ie.jsx)("img",{src:"/images/ssfa.png",alt:"Suraksha Sunflower Apartment",width:"80px",height:"60px"}),Object(ie.jsx)("span",{children:"Suraksha Sunflower "})]}),Object(ie.jsxs)("div",{className:"app",children:[Object(ie.jsxs)(C.c,{collapsed:d,children:[Object(ie.jsxs)(C.a,{children:[Object(ie.jsx)(C.b,{icon:Object(ie.jsx)(b.a,{}),title:"Parse Online Transactions",children:Object(ie.jsx)(s.b,{to:"/",children:"Parse Online Transactions"})}),Object(ie.jsx)(C.b,{icon:Object(ie.jsx)(j.a,{}),title:"Categorize Transactions",children:Object(ie.jsx)(s.b,{to:"/cat",children:"Categorize Transactions"})}),Object(ie.jsx)(C.b,{icon:Object(ie.jsx)(y.a,{}),title:"Upload Bills",children:Object(ie.jsx)(s.b,{to:"/bills",children:"Upload Bills"})}),Object(ie.jsx)(C.b,{icon:Object(ie.jsx)(v.a,{}),title:"Cash Transactions",children:Object(ie.jsx)(s.b,{to:"/cash",children:"Cash Transactions"})}),Object(ie.jsx)(C.b,{icon:Object(ie.jsx)(S.a,{}),title:"Generate Encrypted Keys",children:Object(ie.jsx)(s.b,{to:"/gen-key",children:"Encrypt Keys"})})]}),Object(ie.jsxs)("div",{className:"sb-footer",children:[!d&&Object(ie.jsx)(p.a,{onClick:()=>u(!0)}),d&&Object(ie.jsx)(h.a,{onClick:()=>u(!1)})]})]}),Object(ie.jsxs)("div",{className:"workspace",children:[e&&Object(ie.jsx)(c.a,{severity:"error",children:e}),!i&&Object(ie.jsx)(se,{errorMsg:e,handleSecret:r}),i&&Object(ie.jsx)(La,{})]})]})]})})};a(722);const _a=document.getElementById("root");Object(i.createRoot)(_a).render(Object(ie.jsx)(r.a.StrictMode,{children:Object(ie.jsx)(Ba,{})}));t.default={}}},[[723,1,2]]]);
//# sourceMappingURL=main.a4da140a.chunk.js.map